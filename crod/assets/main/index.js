System.register("chunks:///_virtual/level11.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,T,R,i,s,_;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,T=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,R=t.ENTITY_TYPE_ENUM,i=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,s=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,_=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"00b06W32RtCTJBsuNwMUpcP","level11",void 0);var y={x:0,y:3,direction:E.RIGHT,state:T.IDLE,type:R.PLAYER},n=[{x:4,y:2,direction:E.LEFT,state:i.IDLE,type:R.ENEMY},{x:6,y:1,direction:E.LEFT,state:i.IDLE,type:R.ENEMY_IRON},{x:9,y:1,direction:E.LEFT,state:i.IDLE,type:R.ENEMY_IRON}],I=[{x:4,y:1,type:R.SPIKES,state:s.THREE},{x:6,y:3,type:R.SPIKES,state:s.TWO}],S=[{x:3,y:3,state:T.IDLE,type:R.BURST,direction:E.TOP},{x:3,y:4,state:T.IDLE,type:R.BURST,direction:E.TOP},{x:5,y:2,state:T.IDLE,type:R.BURST,direction:E.TOP},{x:8,y:3,state:T.IDLE,type:R.BURST,direction:E.TOP},{x:8,y:4,state:T.IDLE,type:R.BURST,direction:E.TOP}],c={x:9,y:0,direction:E.TOP,state:_.IDLE,type:R.DOOR};t("default",{mapInfo:[[0,8,8,8,8,8,8,8,2,9,2],[4,9,9,9,9,9,9,9,3,9,4],[3,9,9,8,9,7,9,9,9,9,4],[9,9,9,7,9,9,9,8,7,9,4],[2,9,9,null,9,2,9,9,null,9,4],[1,8,8,8,8,8,8,8,8,8,3],[5,7,7,7,7,7,7,7,7,7,6]],player:y,enemies:n,spikes:I,bursts:S,door:c});e._RF.pop()}}}));

System.register("chunks:///_virtual/DoorMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./EntityManager.ts","./DoorAnimationFSM.ts","./EventMgr.ts","./DataMgr.ts"],(function(t){"use strict";var n,e,s,i,o,c,r,f,u,a;return{setters:[function(t){n=t.cclegacy,e=t._decorator},function(t){s=t.EVENT_ENUM,i=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM},function(t){o=t.inheritsLoose},function(t){c=t.allSettled},function(t){r=t.EntityManager},function(t){f=t.default},function(t){u=t.default},function(t){a=t.default}],execute:function(){var l;n._RF.push({},"01bebe6HCZL07Z/wwH7A5UN","DoorMgr",void 0);var h=e.ccclass;t("DoorMgr",h("DoorMgr")(l=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.init=function(n){var e=this;this.fsm=this.addComponent(f),this.fsm.init(),c(this.fsm.waitList).then((function(){t.prototype.init.call(e,n),e.setEvents()}))},e.setEvents=function(){u.Instance.on(s.ENEMY_DEATH,this.checkAllEnemys,this)},e.checkAllEnemys=function(){for(var t=a.Instance.enemys,n=0;n<t.length;n++){if(!t[n].state.includes("death"))return}this.toDeath()},e.toDeath=function(){this.state=i.DEATH,this.offEvents()},e.onDestroy=function(){this.offEvents()},e.offEvents=function(){u.Instance.off(s.ENEMY_DEATH,this.checkAllEnemys)},n}(r))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./EntityManager.ts","./EventMgr.ts","./DataMgr.ts","./SmokeAnimationFSM.ts"],(function(t){"use strict";var n,s,i,e,o,r,c,u,a,f,h,l;return{setters:[function(t){n=t.cclegacy,s=t._decorator,i=t.Vec2},function(t){e=t.EVENT_ENUM,o=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM},function(t){r=t.inheritsLoose},function(t){c=t.allSettled,u=t.getDirKeyValueNum},function(t){a=t.EntityManager},function(t){f=t.default},function(t){h=t.default},function(t){l=t.default}],execute:function(){var E;n._RF.push({},"02dc756HgRERLICbrpjpJxa","SmokeMgr",void 0);var p=s.ccclass;t("SmokeMgr",p("SmokeMgr")(E=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var s=n.prototype;return s.init=function(n){var s=this;this.fsm=this.addComponent(l),this.fsm.init(),c(this.fsm.waitList).then((function(){s.node.active=!1,t.prototype.init.call(s,n),s.setEvents()}))},s.setEvents=function(){f.Instance.on(e.PLAYER_MOVING,this.show,this)},s.show=function(t){var n=h.Instance.player;this.pos=new i(n.pos.x,n.pos.y),this.currentDir=null,this.node.active=!0,this.currentDir=u(t)},s.toDeath=function(){this.state=o.DEATH,this.offEvents()},s.onDestroy=function(){this.offEvents()},s.offEvents=function(){f.Instance.off(e.ENEMY_DEATH,this.show,this)},n}(a))||E);n._RF.pop()}}}));

System.register("chunks:///_virtual/DataMgr.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts"],(function(t){"use strict";var e,n,s,i,r,o;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose,s=t.createClass,i=t.defineProperty,r=t.assertThisInitialized},function(t){o=t.default}],execute:function(){e._RF.push({},"04a33i75ZJDO7dFHgqrMUBK","DataMgr",void 0);t("default",function(t){function e(){var e;return e=t.call(this)||this,i(r(e),"mapInfo",[]),i(r(e),"mapRowCount",0),i(r(e),"mapColCount",0),i(r(e),"levelIndex",1),i(r(e),"player",null),i(r(e),"door",null),i(r(e),"bursts",[]),i(r(e),"spikes",[]),i(r(e),"enemys",[]),i(r(e),"records",[]),e}return n(e,t),e.prototype.reset=function(){this.mapInfo=[],this.mapRowCount=0,this.mapColCount=0,this.player=null,this.enemys=[],this.spikes=[],this.bursts=[],this.door=null,this.records=[]},s(e,null,[{key:"Instance",get:function(){return t.getInstance.call(this)}}]),e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/level8.ts",["cc","./Enums.ts"],(function(l){"use strict";var n,t,u,e,E,i;return{setters:[function(l){n=l.cclegacy},function(l){t=l.DIRECTION_ORDER_ENUM,u=l.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,e=l.ENTITY_TYPE_ENUM,E=l.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,i=l.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){n._RF.push({},"05939BkdrxIoovYXFNJRQpw","level8",void 0);var T={x:1,y:7,direction:t.TOP,state:u.IDLE,type:e.PLAYER},s=[{x:8,y:1,direction:t.LEFT,state:E.IDLE,type:e.ENEMY}],R=[{x:1,y:2,state:u.IDLE,type:e.BURST,direction:t.TOP},{x:1,y:5,state:u.IDLE,type:e.BURST,direction:t.TOP},{x:1,y:6,state:u.IDLE,type:e.BURST,direction:t.TOP},{x:2,y:1,state:u.IDLE,type:e.BURST,direction:t.TOP},{x:3,y:1,state:u.IDLE,type:e.BURST,direction:t.TOP},{x:4,y:1,state:u.IDLE,type:e.BURST,direction:t.TOP},{x:5,y:1,state:u.IDLE,type:e.BURST,direction:t.TOP},{x:6,y:1,state:u.IDLE,type:e.BURST,direction:t.TOP},{x:6,y:2,state:u.IDLE,type:e.BURST,direction:t.TOP}],y={x:9,y:1,direction:t.LEFT,state:i.IDLE,type:e.DOOR};l("default",{mapInfo:[[0,8,8,8,8,8,8,8,8,8],[4,9,7,7,7,7,7,9,9,9],[1,7,null,8,8,8,null,9,9,8],[5,9,null,5,5,5,9,9,9,5],[null,9,null,null,null,null,5,5,5,null],[null,7,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,9,null,null,null,null,null,null,null,null],[null,7,null,null,null,null,null,null,null,null]],player:T,enemies:s,spikes:[],bursts:R,door:y});n._RF.pop()}}}));

System.register("chunks:///_virtual/FaderManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./Singleton.ts","./DrawManager.ts"],(function(e){"use strict";var t,r,n,a,i,o,u,s,c,f,d,p;return{setters:[function(e){t=e.cclegacy,r=e.RenderRoot2D,n=e.game},function(e){a=e.inheritsLoose,i=e.createClass,o=e.defineProperty,u=e.assertThisInitialized,s=e.asyncToGenerator},function(e){c=e.createNode},function(e){f=e.default},function(e){d=e.DrawManager,p=e.DEFAULT_FADE_DURATION}],execute:function(){t._RF.push({},"08c15dRv29LMYYoK3r3uWCO","FaderManager",void 0);e("FaderManager",function(e){function t(){var t;return t=e.call(this)||this,o(u(t),"_fader",null),t}a(t,e);var f=t.prototype;return f.fadeIn=function(){var e=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=p),e.next=3,this.fader.fadeIn(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),f.fadeOut=function(){var e=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=p),e.next=3,this.fader.fadeOut(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),f.mask=function(){var e=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fader.mask();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i(t,[{key:"fader",get:function(){if(null!==this._fader)return this._fader;var e=c("root");e.addComponent(r);var t=c("fader");return t.setParent(e),this._fader=t.addComponent(d),this._fader.init(),n.addPersistRootNode(e),this._fader}}],[{key:"Instance",get:function(){return e.getInstance.call(this)}}]),t}(f));t._RF.pop()}}}));

System.register("chunks:///_virtual/level15.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,l,n,u,_,R;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,l=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,n=t.ENTITY_TYPE_ENUM,u=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,_=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,R=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"144ee3NBKpNRISar3hB1OW9","level15",void 0);var s={x:0,y:1,direction:E.RIGHT,state:l.IDLE,type:n.PLAYER},T=[{x:2,y:4,direction:E.TOP,state:u.IDLE,type:n.ENEMY},{x:4,y:6,direction:E.TOP,state:u.IDLE,type:n.ENEMY}],S=[{x:1,y:2,type:n.SPIKES,state:_.THREE},{x:2,y:2,type:n.SPIKES,state:_.THREE},{x:2,y:6,type:n.SPIKES,state:_.TWO}],i={x:7,y:7,direction:E.LEFT,state:R.IDLE,type:n.DOOR};t("default",{mapInfo:[[8,8,8,2,null,null,null,null],[9,9,9,4,null,null,null,null],[4,9,9,1,8,2,null,null],[4,9,9,9,7,1,8,2],[4,2,9,7,null,5,7,4],[4,9,9,9,null,null,null,4],[4,9,9,9,9,9,9,3],[4,9,9,9,8,9,9,9],[1,8,8,8,8,8,8,8],[5,7,7,7,7,7,7,7]],player:s,enemies:T,spikes:S,bursts:[],door:i});e._RF.pop()}}}));

System.register("chunks:///_virtual/level6.ts",["cc","./Enums.ts"],(function(e){"use strict";var t,E,_,s,n,R;return{setters:[function(e){t=e.cclegacy},function(e){E=e.DIRECTION_ORDER_ENUM,_=e.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,s=e.ENTITY_TYPE_ENUM,n=e.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,R=e.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){t._RF.push({},"147f1I/sc5L2Z09WGQmrwqk","level6",void 0);var i={x:0,y:3,direction:E.RIGHT,state:_.IDLE,type:s.PLAYER},c=[{x:5,y:2,direction:E.LEFT,state:n.IDLE,type:s.ENEMY},{x:5,y:4,direction:E.LEFT,state:_.IDLE,type:s.ENEMY}],r={x:8,y:3,direction:E.LEFT,state:R.IDLE,type:s.DOOR};e("default",{mapInfo:[[0,8,8,8,8,8,8,8,2],[4,9,9,9,7,9,9,9,4],[4,9,9,9,null,9,9,9,3],[9,9,9,9,9,9,9,9,9],[4,9,9,9,7,9,9,9,4],[4,9,9,9,null,9,9,9,4],[1,8,8,8,8,8,8,8,3],[5,7,7,7,7,7,7,7,6]],player:i,enemies:c,spikes:[],bursts:[],door:r});t._RF.pop()}}}));

System.register("chunks:///_virtual/level10.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,T,_,i,R,s;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,T=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,_=t.ENTITY_TYPE_ENUM,i=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,R=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,s=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"1cad6v4+wJHhZyDYEia0v5x","level10",void 0);var n={x:1,y:7,direction:E.TOP,state:T.IDLE,type:_.PLAYER},c=[{x:1,y:3,direction:E.BOTTOM,state:i.IDLE,type:_.ENEMY},{x:2,y:4,direction:E.BOTTOM,state:i.IDLE,type:_.ENEMY_IRON},{x:5,y:5,direction:E.LEFT,state:i.IDLE,type:_.ENEMY}],y=[{x:4,y:3,type:_.SPIKES,state:R.THREE}],M=[{x:3,y:4,state:T.IDLE,type:_.BURST,direction:E.TOP},{x:3,y:5,state:T.IDLE,type:_.BURST,direction:E.TOP}],r={x:6,y:1,direction:E.LEFT,state:s.IDLE,type:_.DOOR};t("default",{mapInfo:[[0,8,8,8,8,8,2],[4,9,9,9,9,9,9],[4,9,7,9,9,8,2],[4,9,9,8,9,9,4],[0,8,9,7,9,9,4],[4,9,9,null,7,9,4],[4,9,7,9,9,9,4],[1,9,8,8,8,8,3],[5,7,7,7,7,7,6]],player:n,enemies:c,spikes:y,bursts:M,door:r});e._RF.pop()}}}));

System.register("chunks:///_virtual/level4.ts",["cc","./Enums.ts"],(function(e){"use strict";var t,E,_,n,s,R;return{setters:[function(e){t=e.cclegacy},function(e){E=e.DIRECTION_ORDER_ENUM,_=e.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,n=e.ENTITY_TYPE_ENUM,s=e.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,R=e.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){t._RF.push({},"23bbaIsYmhBLr4r+yN2LBdo","level4",void 0);var l={x:2,y:7,direction:E.TOP,state:_.IDLE,type:n.PLAYER},u=[{x:1,y:3,direction:E.BOTTOM,state:s.IDLE,type:n.ENEMY_IRON}],r={x:2,y:0,direction:E.TOP,state:R.IDLE,type:n.DOOR};e("default",{mapInfo:[[0,3,9,1,2],[4,9,9,9,4],[4,9,9,9,4],[4,9,9,7,4],[1,2,9,null,4],[null,4,9,9,4],[null,4,9,9,4],[null,1,9,1,3],[null,5,7,7,6]],player:l,enemies:u,spikes:[],bursts:[],door:r});t._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesAnimationFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./FSM.ts","./EntityManager.ts","./SpikesAnimationSubFSM.ts"],(function(t){"use strict";var n,i,e,o,a,s,r,c,u,h,p,S,f,l;return{setters:[function(t){n=t.cclegacy,i=t._decorator,e=t.Animation},function(t){o=t.COUNT_ORDER_ENUM,a=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,s=t.RES_PATH,r=t.FSM_STATE_NUM_PARAMS_ENUM},function(t){c=t.inheritsLoose,u=t.defineProperty,h=t.assertThisInitialized},function(t){p=t.FSM_PARAM_TYPE_ENUM,S=t.default},function(t){f=t.EntityManager},function(t){l=t.default}],execute:function(){var M;n._RF.push({},"2c59fn3l4pK75/ZqUhST4oP","SpikesAnimationFSM",void 0);var m=i.ccclass;i.property,t("default",m("SpikesAnimationFSM")(M=function(t){function n(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,u(h(n),"animationComponent",void 0),u(h(n),"totalCount",void 0),n}c(n,t);var i=n.prototype;return i.init=function(t){this.totalCount=t,this.animationComponent=this.node.addComponent(e),this.initParams(),this.initStateMachine(),this.initAnimationEvent()},i.initAnimationEvent=function(){var t=this;this.animationComponent.on(e.EventType.FINISHED,(function(){t.node.getComponent(f).currentCount===t.totalCount-1&&(t.node.getComponent(f).currentCount=o.ZERO)}))},i.initStateMachine=function(){for(var t=0,n=Object.keys(a);t<n.length;t++){var i=n[t];this.stateMachine.set(a[i],new l(this,a[i],s.SPIKES_BASE_ATLAS))}},i.initParams=function(){for(var t=0,n=Object.keys(a);t<n.length;t++){var i=n[t];this.params.set(a[i],{type:p.TRIGGER,value:!1})}this.params.set(r.COUNT,{type:p.NUMBER,value:0})},i.stateChange=function(){var t=this.node.getComponent(f).state;this.stateMachine.get(t).stateChange()},n}(S))||M);n._RF.pop()}}}));

System.register("chunks:///_virtual/StartMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./FaderManager.ts"],(function(t){"use strict";var r,e,n,o,a,c,s,u,i;return{setters:[function(t){r=t.cclegacy,e=t._decorator,n=t.Node,o=t.Component,a=t.director},function(t){c=t.SCENE_ENUM},function(t){s=t.inheritsLoose,u=t.asyncToGenerator},function(t){i=t.FaderManager}],execute:function(){var p;r._RF.push({},"2d2027brk1LEoMDeyzmcB6A","StartMgr",void 0);var d=e.ccclass;e.property,t("StartMgr",d("StartMgr")(p=function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var e=r.prototype;return e.onLoad=function(){this.node.on(n.EventType.TOUCH_END,this.handelStart,this)},e.handelStart=function(){var t=u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Instance.fadeIn(500);case 2:a.loadScene(c.BATTLE);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r}(o))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeAnimationSubFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./SubFSM.ts","./Utils.ts","./AnState.ts"],(function(t){"use strict";var e,n,i,s,a,u,o,r;return{setters:[function(t){e=t.cclegacy,n=t.AnimationClip},function(t){i=t.FSM_STATE_NUM_PARAMS_ENUM,s=t.RES_PATH},function(t){a=t.inheritsLoose},function(t){u=t.default},function(t){o=t.getDirKeyValue},function(t){r=t.default}],execute:function(){e._RF.push({},"2e5e5f9xglA3q0oZLyEPU2q","SmokeAnimationSubFSM",void 0);t("default",function(t){function e(e,a){var u;(u=t.call(this,e)||this).fsm=e,u.paramsKey=a;var c=u.fsm.getParams(i.DIRECTION),f=o(c);return u.stateMachine.set(a,new r(u.fsm,s.SMOKE_BASE_ATLAS+"/"+a+"/",n.WrapMode.Normal,!0,f)),u}return a(e,t),e.prototype.stateChange=function(){this.currentState=this.stateMachine.get(this.paramsKey)},e}(u));e._RF.pop()}}}));

System.register("chunks:///_virtual/level19.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,i,T,n,s;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,i=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,T=t.ENTITY_TYPE_ENUM,n=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,s=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"2e684gCg5ZHK6X2ctlk9gk2","level19",void 0);var R={x:0,y:1,direction:E.RIGHT,state:i.IDLE,type:T.PLAYER},y=[{x:2,y:5,direction:E.TOP,state:n.IDLE,type:T.ENEMY},{x:4,y:9,direction:E.TOP,state:n.IDLE,type:T.ENEMY}],c=[{x:1,y:5,state:i.IDLE,type:T.BURST,direction:E.TOP},{x:1,y:6,state:i.IDLE,type:T.BURST,direction:E.TOP},{x:1,y:7,state:i.IDLE,type:T.BURST,direction:E.TOP},{x:1,y:8,state:i.IDLE,type:T.BURST,direction:E.TOP},{x:1,y:9,state:i.IDLE,type:T.BURST,direction:E.TOP},{x:2,y:6,state:i.IDLE,type:T.BURST,direction:E.TOP},{x:2,y:7,state:i.IDLE,type:T.BURST,direction:E.TOP}],r={x:6,y:9,direction:E.LEFT,state:s.IDLE,type:T.DOOR};t("default",{mapInfo:[[8,8,8,8,8,8,2],[9,9,9,9,9,9,4],[8,8,8,2,9,9,4],[7,7,7,4,9,9,4],[0,8,8,3,9,9,4],[4,7,9,9,9,9,4],[4,null,7,0,8,8,3],[4,null,null,4,7,7,6],[4,null,9,1,8,8,8],[4,null,9,9,9,9,9],[1,8,8,8,8,8,8],[5,7,7,6,7,7,6]],player:R,enemies:y,spikes:[],bursts:c,door:r});e._RF.pop()}}}));

System.register("chunks:///_virtual/level16.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,T,i,s,n,y;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,T=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,i=t.ENTITY_TYPE_ENUM,s=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,n=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,y=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"2f11c6QI+FNQ7vFwANVGst9","level16",void 0);var _={x:0,y:1,direction:E.RIGHT,state:T.IDLE,type:i.PLAYER},R=[{x:4,y:4,direction:E.LEFT,state:s.IDLE,type:i.ENEMY},{x:5,y:3,direction:E.LEFT,state:s.IDLE,type:i.ENEMY},{x:6,y:2,direction:E.LEFT,state:s.IDLE,type:i.ENEMY},{x:4,y:6,direction:E.TOP,state:s.IDLE,type:i.ENEMY_IRON},{x:4,y:7,direction:E.TOP,state:s.IDLE,type:i.ENEMY_IRON}],I=[{x:4,y:5,type:i.SPIKES,state:n.THREE},{x:5,y:5,type:i.SPIKES,state:n.TWO},{x:6,y:5,type:i.SPIKES,state:n.ONE}],S=[{x:3,y:5,state:T.IDLE,type:i.BURST,direction:E.TOP},{x:3,y:6,state:T.IDLE,type:i.BURST,direction:E.TOP},{x:3,y:7,state:T.IDLE,type:i.BURST,direction:E.TOP}],c={x:0,y:7,direction:E.LEFT,state:y.IDLE,type:i.DOOR};t("default",{mapInfo:[[8,8,8,8,8,8,8,2],[9,9,9,9,9,9,9,4],[8,8,8,2,9,9,9,4],[5,7,7,4,9,9,9,4],[null,0,8,3,9,9,9,4],[null,4,9,7,9,9,9,4],[1,3,9,null,9,9,9,4],[9,9,9,null,9,0,8,3],[8,8,8,8,8,3,6,6],[5,7,7,7,7,6,null,null]],player:_,enemies:R,spikes:I,bursts:S,door:c});e._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["cc"],(function(E){"use strict";var T;return{setters:[function(E){T=E.cclegacy}],execute:function(){var _,R,A,N,O,L,M,t,S,I,U,o,e,i,n,F,C,P,u;E({ANIMATION_FSM_STATE_ENUM:void 0,CONTROL_BTN_ENUM:void 0,COUNT_ENUM:void 0,COUNT_ORDER_ENUM:void 0,DIRECTION_ENUM:void 0,DIRECTION_ORDER_ENUM:void 0,ENTITY_TYPE_ENUM:void 0,EVENT_ENUM:void 0,FADE_STATE_ENUM:void 0,FSM_BURST_STATE_TRIGGER_PARAMS_ENUM:void 0,FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM:void 0,FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM:void 0,FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM:void 0,FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM:void 0,FSM_STATE_NUM_PARAMS_ENUM:void 0,RES_PATH:void 0,SCENE_ENUM:void 0,TILE_TYPE_ENUM:void 0,TOTAL_COUNT_ENUM:void 0}),T._RF.push({},"2faa6asgslIZaEKADOcpLw8","Enums",void 0),function(E){E[E.WALL_LEFT_TOP=0]="WALL_LEFT_TOP",E[E.WALL_LEFT_BOTTOM=1]="WALL_LEFT_BOTTOM",E[E.WALL_RIGHT_TOP=2]="WALL_RIGHT_TOP",E[E.WALL_RIGHT_BOTTOM=3]="WALL_RIGHT_BOTTOM",E[E.WALL_COLUMN=4]="WALL_COLUMN",E[E.CLIFF_LEFT=5]="CLIFF_LEFT",E[E.CLIFF_RIGHT=6]="CLIFF_RIGHT",E[E.CLIFF_CENTER=7]="CLIFF_CENTER",E[E.WALL_ROW=8]="WALL_ROW",E[E.FLOOR=9]="FLOOR",E[E.TOP_CORNER=10]="TOP_CORNER"}(_||(_=E("TILE_TYPE_ENUM",{}))),function(E){E.TOP="top",E.RIGHT="right",E.BOTTOM="bottom",E.LEFT="left",E.TURN_LEFT="turnleft",E.TURN_RIGHT="turnright"}(R||(R=E("CONTROL_BTN_ENUM",{}))),function(E){E.TOP="top",E.RIGHT="right",E.BOTTOM="bottom",E.LEFT="left"}(A||(A=E("DIRECTION_ENUM",{}))),function(E){E[E.TOP=0]="TOP",E[E.RIGHT=1]="RIGHT",E[E.BOTTOM=2]="BOTTOM",E[E.LEFT=3]="LEFT"}(N||(N=E("DIRECTION_ORDER_ENUM",{}))),function(E){E.ZERO="zero",E.ONE="one",E.TWO="two",E.THREE="three",E.FOUR="four",E.FIVE="five"}(O||(O=E("COUNT_ENUM",{}))),function(E){E[E.TWO=3]="TWO",E[E.THREE=4]="THREE",E[E.FOUR=5]="FOUR",E[E.FIVE=6]="FIVE"}(L||(L=E("TOTAL_COUNT_ENUM",{}))),function(E){E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.TWO=2]="TWO",E[E.THREE=3]="THREE",E[E.FOUR=4]="FOUR",E[E.FIVE=5]="FIVE"}(M||(M=E("COUNT_ORDER_ENUM",{}))),function(E){E.DIRECTION="DIRECTION",E.COUNT="COUNT"}(t||(t=E("FSM_STATE_NUM_PARAMS_ENUM",{}))),function(E){E.IDLE="idle",E.TURN_LEFT="turnleft",E.TURN_RIGHT="turnright",E.BLOCK_FRONT="blockfront",E.BLOCK_RIGHT="blockright",E.BLOCK_BACK="blockback",E.BLOCK_LEFT="blockleft",E.BLOCK_TURN_RIGHT="blockturnright",E.BLOCK_TURN_LEFT="blockturnleft",E.ATTACK="attack",E.DEATH="death",E.AIRDEATH="airdeath"}(S||(S=E("FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM",{}))),function(E){E.IDLE="idle",E.ATTACK="attack",E.DEATH="death"}(I||(I=E("FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM",{}))),function(E){E.IDLE="idle",E.ATTACK="attack",E.DEATH="death"}(U||(U=E("FSM_BURST_STATE_TRIGGER_PARAMS_ENUM",{}))),function(E){E.ONE="spikesone",E.TWO="spikestwo",E.THREE="spikesthree",E.FOUR="spikesfour"}(o||(o=E("FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM",{}))),function(E){E.IDLE="idle",E.DEATH="death"}(e||(e=E("FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM",{}))),function(E){E[E.TRIGGER=0]="TRIGGER",E[E.NUMBER=1]="NUMBER"}(i||(i=E("ANIMATION_FSM_STATE_ENUM",{}))),function(E){E.NEXT_LEVEL="NEXT_LEVEL",E.PLAYER_CTRL="PLAYER_CTRL",E.PLAYER_BORN="PLAYER_BORN",E.PLAYER_MOVE_END="PLAYER_MOVE_END",E.PLAYER_MOVING="PLAYER_MOVING",E.PLAYER_ATTACK="PLAYER_ATTACK",E.PLAYER_DEATH="PLAYER_DEATH",E.ENEMY_BORN="ENEMY_BORN",E.ENEMY_ATTACK="ENEMY_ATTACK",E.ENEMY_DEATH="ENEMY_DEATH",E.BURST_ATTACK="BURST_ATTACK",E.BURST_DEATH="BURST_DEATH",E.STOP_SCREEN_SHAKE="STOP_SCREEN_SHAKE",E.SCREEN_SHAKE="SCREEN_SHAKE",E.UNDO="UNDO",E.RECORD="RECORD",E.RESTART="RESTART"}(n||(n=E("EVENT_ENUM",{}))),function(E){E.TILE_ATLAS="texture/tile/",E.PLAYER_BASE_ATLAS="texture/player",E.ENEMY_BASE_ATLAS="texture/woodenskeleton",E.ENEMY_IRON_BASE_ATLAS="texture/ironskeleton",E.DOOR_BASE_ATLAS="texture/door",E.BURST_BASE_ATLAS="texture/burst",E.SPIKES_BASE_ATLAS="texture/spikes",E.SMOKE_BASE_ATLAS="texture/smoke",E.CTRL_BASE_ATLAS="texture/ctrl"}(F||(F=E("RES_PATH",{}))),function(E){E[E.PLAYER=0]="PLAYER",E[E.ENEMY=1]="ENEMY",E[E.ENEMY_IRON=2]="ENEMY_IRON",E[E.DOOR=3]="DOOR",E[E.BURST=4]="BURST",E[E.SPIKES=5]="SPIKES",E[E.SMOKE=6]="SMOKE"}(C||(C=E("ENTITY_TYPE_ENUM",{}))),function(E){E.IDLE="IDLE",E.FADE_IN="FADE_IN",E.FADE_OUT="FADE_OUT"}(P||(P=E("FADE_STATE_ENUM",{}))),function(E){E.START="start",E.BATTLE="battle",E.MENU="loading"}(u||(u=E("SCENE_ENUM",{}))),T._RF.pop()}}}));

System.register("chunks:///_virtual/level20.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,l,n,E,u,i;return{setters:[function(t){e=t.cclegacy},function(t){l=t.DIRECTION_ORDER_ENUM,n=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,E=t.ENTITY_TYPE_ENUM,u=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,i=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"33fddAOFjpFGKNnN/CsxlAg","level20",void 0);var T={x:0,y:4,direction:l.RIGHT,state:n.IDLE,type:E.PLAYER},s=[{x:9,y:1,direction:l.LEFT,state:u.IDLE,type:E.ENEMY},{x:9,y:3,direction:l.LEFT,state:u.IDLE,type:E.ENEMY_IRON},{x:9,y:4,direction:l.LEFT,state:u.IDLE,type:E.ENEMY_IRON}],R=[{x:1,y:2,state:n.IDLE,type:E.BURST,direction:l.TOP},{x:1,y:3,state:n.IDLE,type:E.BURST,direction:l.TOP},{x:2,y:3,state:n.IDLE,type:E.BURST,direction:l.TOP},{x:2,y:4,state:n.IDLE,type:E.BURST,direction:l.TOP},{x:7,y:4,state:n.IDLE,type:E.BURST,direction:l.TOP}],_={x:9,y:0,direction:l.TOP,state:i.IDLE,type:E.DOOR};t("default",{mapInfo:[[null,null,null,null,null,null,null,null,null,9,2],[0,8,8,8,8,2,null,null,null,9,4],[4,7,9,9,9,4,8,8,null,9,4],[3,null,7,7,9,3,9,9,9,9,4],[9,9,null,null,9,9,9,7,9,9,4],[8,8,8,null,8,8,8,8,8,8,3],[5,7,7,null,7,7,7,7,7,7,6]],player:T,enemies:s,spikes:[],bursts:R,door:_});e._RF.pop()}}}));

System.register("chunks:///_virtual/ShakeMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./constant.ts","./EventMgr.ts"],(function(t){"use strict";var i,o,n,s,e,a,h,r,c,u,l;return{setters:[function(t){i=t.cclegacy,o=t._decorator,n=t.Vec2,s=t.game,e=t.Component},function(t){a=t.EVENT_ENUM},function(t){h=t.inheritsLoose,r=t.defineProperty,c=t.assertThisInitialized},function(t){u=t.DirectionVec2},function(t){l=t.default}],execute:function(){var S;i._RF.push({},"35e2dezkWBCfLVEgr51mb96","ShakeMgr",void 0);var d=o.ccclass;o.property,t("ShakeMgr",d("ShakeMgr")(S=function(t){function i(){for(var i,o=arguments.length,s=new Array(o),e=0;e<o;e++)s[e]=arguments[e];return i=t.call.apply(t,[this].concat(s))||this,r(c(i),"isShaking",!1),r(c(i),"duration",.2),r(c(i),"amount",10),r(c(i),"frequency",10),r(c(i),"oldPos",new n),r(c(i),"oldTime",0),r(c(i),"shakeDir",void 0),i}h(i,t);var o=i.prototype;return o.onLoad=function(){l.Instance.on(a.SCREEN_SHAKE,this.onShake,this),l.Instance.on(a.STOP_SCREEN_SHAKE,this.stopShake,this)},o.onDestroy=function(){l.Instance.off(a.SCREEN_SHAKE,this.onShake),l.Instance.off(a.STOP_SCREEN_SHAKE,this.stopShake)},o.onShake=function(t){this.isShaking||(this.shakeDir=t,this.isShaking=!0,this.oldTime=s.totalTime,this.oldPos.x=this.node.position.x,this.oldPos.y=this.node.position.y)},o.stopShake=function(){this.isShaking=!1,this.node.setPosition(this.oldPos.x,this.oldPos.y)},o.update=function(t){if(this.isShaking){var i=(s.totalTime-this.oldTime)/1e3;if(i>=this.duration)return void this.stopShake();var o=this.amount*Math.sin(this.frequency*i/Math.PI),n=u.get(this.shakeDir).clone().multiplyScalar(o);this.node.setPosition(this.oldPos.x+n.x,this.oldPos.y-n.y)}},i}(e))||S);i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAnimationFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./FSM.ts","./EntityManager.ts","./PlayerAnimationSubFSM.ts"],(function(t){"use strict";var n,e,i,a,o,s,r,c,u,h,l,p;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.Animation},function(t){a=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,o=t.FSM_STATE_NUM_PARAMS_ENUM},function(t){s=t.inheritsLoose,r=t.defineProperty,c=t.assertThisInitialized},function(t){u=t.FSM_PARAM_TYPE_ENUM,h=t.default},function(t){l=t.EntityManager},function(t){p=t.default}],execute:function(){var f;n._RF.push({},"37d02dudSNOiZQOUSjBItHQ","PlayerAnimationFSM",void 0);var m=e.ccclass;e.property,t("default",m("PlayerAnimationFSM")(f=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,r(c(n),"animationComponent",void 0),n}s(n,t);var e=n.prototype;return e.init=function(){this.animationComponent=this.node.addComponent(i),this.initParams(),this.initStateMachine(),this.initAnimationEvent()},e.initAnimationEvent=function(){var t=this;this.animationComponent.on(i.EventType.FINISHED,(function(){t.currentState.paramsKey.includes("death")||(t.node.getComponent(l).state=a.IDLE)}))},e.initStateMachine=function(){for(var t=0,n=Object.keys(a);t<n.length;t++){var e=n[t];this.stateMachine.set(a[e],new p(this,a[e]))}},e.initParams=function(){for(var t=0,n=Object.keys(a);t<n.length;t++){var e=n[t];this.params.set(a[e],{type:u.TRIGGER,value:!1})}this.params.set(o.DIRECTION,{type:u.NUMBER,value:0})},e.stateChange=function(){var t=this.node.getComponent(l).state;this.stateMachine.get(t).stateChange()},n}(h))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/type.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3d027EESDVJGbAt5rZt2isH","type",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyAnimationFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./FSM.ts","./EntityManager.ts","./EventMgr.ts","./EnemyAnimationSubFSM.ts"],(function(t){"use strict";var n,e,i,a,o,s,r,E,c,u,M,h,_,p,A,m;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.Animation},function(t){a=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,o=t.EVENT_ENUM,s=t.ENTITY_TYPE_ENUM,r=t.RES_PATH,E=t.FSM_STATE_NUM_PARAMS_ENUM},function(t){c=t.inheritsLoose,u=t.defineProperty,M=t.assertThisInitialized},function(t){h=t.FSM_PARAM_TYPE_ENUM,_=t.default},function(t){p=t.EntityManager},function(t){A=t.default},function(t){m=t.default}],execute:function(){var f;n._RF.push({},"49ca7IaazZB5LyT3PQ+zvfi","EnemyAnimationFSM",void 0);var y=e.ccclass;e.property,t("default",y("EnemyAnimationFSM")(f=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,u(M(n),"animationComponent",void 0),u(M(n),"type",void 0),n}c(n,t);var e=n.prototype;return e.init=function(t){this.type=t,this.animationComponent=this.node.addComponent(i),this.initParams(),this.initStateMachine(),this.initAnimationEvent()},e.initAnimationEvent=function(){var t=this;this.animationComponent.on(i.EventType.FINISHED,(function(){t.currentState.paramsKey!==a.DEATH?t.node.getComponent(p).state=a.IDLE:A.Instance.emit(o.ENEMY_DEATH)}))},e.initStateMachine=function(){for(var t=0,n=Object.keys(a);t<n.length;t++){var e=n[t];a[e]===a.ATTACK&&this.type===s.ENEMY_IRON||this.stateMachine.set(a[e],new m(this,a[e],this.type===s.ENEMY_IRON?r.ENEMY_IRON_BASE_ATLAS:r.ENEMY_BASE_ATLAS))}},e.initParams=function(){for(var t=0,n=Object.keys(a);t<n.length;t++){var e=n[t];a[e]===a.ATTACK&&this.type===s.ENEMY_IRON||this.params.set(a[e],{type:h.TRIGGER,value:!1})}this.params.set(E.DIRECTION,{type:h.NUMBER,value:0})},e.stateChange=function(){var t=this.node.getComponent(p).state;this.stateMachine.get(t).stateChange()},n}(_))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/level3.ts",["cc","./Enums.ts"],(function(l){"use strict";var n,u,t,e,E,S,_;return{setters:[function(l){n=l.cclegacy},function(l){u=l.DIRECTION_ORDER_ENUM,t=l.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,e=l.ENTITY_TYPE_ENUM,E=l.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,S=l.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,_=l.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){n._RF.push({},"4e391A4rVlFb5muCuBrdvGb","level3",void 0);var s={x:0,y:8,direction:u.RIGHT,state:t.IDLE,type:e.PLAYER},R=[{x:6,y:7,direction:u.TOP,state:E.IDLE,type:e.ENEMY}],y=[{x:4,y:8,type:e.SPIKES,state:S.ONE},{x:4,y:9,type:e.SPIKES,state:S.ONE},{x:6,y:3,type:e.SPIKES,state:S.ONE},{x:7,y:3,type:e.SPIKES,state:S.ONE},{x:6,y:5,type:e.SPIKES,state:S.ONE},{x:7,y:5,type:e.SPIKES,state:S.ONE}],I={x:6,y:0,direction:u.TOP,state:_.IDLE,type:e.DOOR};l("default",{mapInfo:[[null,null,null,null,null,4,9,4,null],[null,null,null,null,null,4,9,1,2],[null,null,null,null,null,4,9,9,4],[null,null,null,null,null,4,9,9,4],[null,null,null,null,null,4,9,9,4],[null,null,null,null,null,4,9,9,4],[null,null,null,null,null,4,9,9,4],[1,8,8,8,8,3,9,9,4],[9,9,9,9,9,9,9,9,4],[1,8,2,9,9,9,9,9,4],[5,7,1,8,8,8,8,8,3],[null,null,7,7,7,7,7,7,6]],player:s,enemies:R,spikes:y,bursts:[],door:I});n._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./level11.ts","./level8.ts","./level15.ts","./level6.ts","./level10.ts","./level4.ts","./level19.ts","./level16.ts","./level20.ts","./level3.ts","./level1.ts","./level2.ts","./level5.ts","./level7.ts","./level9.ts","./level12.ts","./level13.ts","./level14.ts","./level17.ts","./level18.ts","./level21.ts"],(function(e){"use strict";var l,t,n,u,f,v,c,i,s,o,a,d,r,p,x,F,_,g,h,k,m,y;return{setters:[function(e){l=e.cclegacy},function(e){t=e.default},function(e){n=e.default},function(e){u=e.default},function(e){f=e.default},function(e){v=e.default},function(e){c=e.default},function(e){i=e.default},function(e){s=e.default},function(e){o=e.default},function(e){a=e.default},function(e){d=e.default},function(e){r=e.default},function(e){p=e.default},function(e){x=e.default},function(e){F=e.default},function(e){_=e.default},function(e){g=e.default},function(e){h=e.default},function(e){k=e.default},function(e){m=e.default},function(e){y=e.default}],execute:function(){l._RF.push({},"4efeeziiDpKV6jmk4FKXe7N","index",void 0);e("default",{level1:d,level2:r,level3:a,level4:c,level5:p,level6:f,level7:x,level8:n,level9:F,level10:v,level11:t,level12:_,level13:g,level14:h,level15:u,level16:s,level17:k,level18:m,level19:i,level20:o,level21:y});l._RF.pop()}}}));

System.register("chunks:///_virtual/DoorAnimationFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./FSM.ts","./DoorAnimationSubFSM.ts","./EntityManager.ts"],(function(t){"use strict";var n,i,e,a,o,s,r,c,u,h,p,M;return{setters:[function(t){n=t.cclegacy,i=t._decorator,e=t.Animation},function(t){a=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM,o=t.FSM_STATE_NUM_PARAMS_ENUM},function(t){s=t.inheritsLoose,r=t.defineProperty,c=t.assertThisInitialized},function(t){u=t.FSM_PARAM_TYPE_ENUM,h=t.default},function(t){p=t.default},function(t){M=t.EntityManager}],execute:function(){var f;n._RF.push({},"51575B316ZP4IOKHtxu86gU","DoorAnimationFSM",void 0);var m=i.ccclass;i.property,t("default",m("DoorAnimationFSM")(f=function(t){function n(){for(var n,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return n=t.call.apply(t,[this].concat(e))||this,r(c(n),"animationComponent",void 0),n}s(n,t);var i=n.prototype;return i.init=function(){this.animationComponent=this.node.addComponent(e),this.initParams(),this.initStateMachine(),this.initAnimationEvent()},i.initAnimationEvent=function(){var t=this;this.animationComponent.on(e.EventType.FINISHED,(function(){t.currentState.paramsKey!==a.DEATH&&(t.node.getComponent(M).state=a.IDLE)}))},i.initStateMachine=function(){for(var t=0,n=Object.keys(a);t<n.length;t++){var i=n[t];a[i]===a.DEATH?this.stateMachine.set(a.DEATH,new p(this,a.DEATH,!1)):this.stateMachine.set(a[i],new p(this,a[i]))}},i.initParams=function(){for(var t=0,n=Object.keys(a);t<n.length;t++){var i=n[t];this.params.set(a[i],{type:u.TRIGGER,value:!1})}this.params.set(o.DIRECTION,{type:u.NUMBER,value:0})},i.stateChange=function(){var t=this.node.getComponent(M).state;this.stateMachine.get(t).stateChange()},n}(h))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/level12.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,l,E,n,u,i;return{setters:[function(t){e=t.cclegacy},function(t){l=t.DIRECTION_ORDER_ENUM,E=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,n=t.ENTITY_TYPE_ENUM,u=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,i=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"52f9eiy1B1N1oAQyt7H+bV2","level12",void 0);var _={x:3,y:5,direction:l.TOP,state:E.IDLE,type:n.PLAYER},s=[{x:1,y:1,direction:l.BOTTOM,state:u.IDLE,type:n.ENEMY_IRON},{x:6,y:2,direction:l.LEFT,state:u.IDLE,type:n.ENEMY}],T=[{x:4,y:2,state:E.IDLE,type:n.BURST,direction:l.TOP},{x:4,y:3,state:E.IDLE,type:n.BURST,direction:l.TOP}],R={x:0,y:1,direction:l.LEFT,state:i.IDLE,type:n.DOOR};t("default",{mapInfo:[[0,8,8,8,8,8,8,8,8],[9,9,9,9,9,9,9,9,9],[5,7,7,7,7,8,9,7,7],[null,null,null,null,null,8,9,null,null],[null,null,null,9,9,9,9,null,null],[1,8,8,9,8,8,8,8,8],[5,7,7,7,7,7,7,7,7]],player:_,enemies:s,spikes:[],bursts:T,door:R});e._RF.pop()}}}));

System.register("chunks:///_virtual/BattleMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./constant.ts","./EventMgr.ts","./DataMgr.ts","./DoorMgr.ts","./SmokeMgr.ts","./FaderManager.ts","./ShakeMgr.ts","./index.ts","./TileMgr.ts","./PlayerMgr.ts","./EnemyMgr.ts","./BurstMgr.ts","./SpikesMgr.ts"],(function(t){"use strict";var n,e,i,s,a,r,o,c,u,l,p,f,h,d,m,I,v,g,y,E,M,L,x,C,k,w,S,T,R,b,_,D;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.Node,s=t.sys,a=t.Component},function(t){r=t.EVENT_ENUM,o=t.DIRECTION_ORDER_ENUM,c=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,u=t.ENTITY_TYPE_ENUM},function(t){l=t.applyDecoratedDescriptor,p=t.inheritsLoose,f=t.initializerDefineProperty,h=t.assertThisInitialized,d=t.defineProperty,m=t.asyncToGenerator},function(t){I=t.createNode,v=t.setReData,g=t.setData,y=t.allSettled},function(t){E=t.TILE_CONST},function(t){M=t.default},function(t){L=t.default},function(t){x=t.DoorMgr},function(t){C=t.SmokeMgr},function(t){k=t.FaderManager},function(t){w=t.ShakeMgr},function(t){S=t.default},function(t){T=t.TileMgr},function(t){R=t.PlayerMgr},function(t){b=t.EnemyMgr},function(t){_=t.BurstMgr},function(t){D=t.SpikesMgr}],execute:function(){var N,P,B,O,A,U,z,F,H;n._RF.push({},"54b59sH+WdBnLs/xBWuCuN2","BattleMgr",void 0);var G=e.ccclass,V=e.property;t("BattleMgr",(N=G("BattleMgr"),P=V(i),B=V(i),O=V(i),N((z=l((U=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return n=t.call.apply(t,[this].concat(i))||this,f(h(n),"stage",z,h(n)),f(h(n),"menu",F,h(n)),f(h(n),"ctrls",H,h(n)),d(h(n),"smokeNode",null),d(h(n),"waitList",[]),d(h(n),"level",null),d(h(n),"hasInited",!1),n}p(n,t);var e=n.prototype;return e.onLoad=function(){this.hasInited=!1,s.localStorage.getItem("levelIndex")&&(L.Instance.levelIndex=parseInt(s.localStorage.getItem("levelIndex"))||1),this.menu.active=!1,this.ctrls.active=!1},e.setEvents=function(){M.Instance.on(r.NEXT_LEVEL,this.nextLevel,this),M.Instance.on(r.UNDO,this.undo,this),M.Instance.on(r.RECORD,this.record,this),M.Instance.on(r.RESTART,this.init,this)},e.offEvents=function(){M.Instance.off(r.NEXT_LEVEL,this.nextLevel),M.Instance.off(r.UNDO,this.undo),M.Instance.off(r.RECORD,this.record)},e.onDestroy=function(){this.offEvents()},e.start=function(){this.init()},e.init=function(){var t=m(regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initLevels();case 2:return this.initTileMaps(),this.initEnemys(),this.initDoor(),this.initBursts(),this.initSpikes(),this.initSmoke(),this.initPlayer(),this.adaptStage(),this.setEvents(),t.next=13,y(this.waitList).then((function(){n.menu.active=!0,n.ctrls.active=!0,n.hasInited=!0}));case 13:return t.next=15,k.Instance.fadeOut(200);case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.initLevels=function(){var t=m(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=S["level"+L.Instance.levelIndex])){t.next=14;break}if(!this.hasInited){t.next=7;break}return t.next=5,k.Instance.fadeIn();case 5:t.next=9;break;case 7:return t.next=9,k.Instance.mask();case 9:this.clearLevel(),this.level=n,L.Instance.mapInfo=n.mapInfo,L.Instance.mapRowCount=n.mapInfo.length||0,L.Instance.mapColCount=n.mapInfo[0].length||0;case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.initTileMaps=function(){var t=I("tileMap"),n=t.addComponent(T);this.stage.addChild(t),n.init()},e.nextLevel=function(){L.Instance.levelIndex++,s.localStorage.setItem("levelIndex",L.Instance.levelIndex.toString()),this.init()},e.clearLevel=function(){this.stage.destroyAllChildren(),L.Instance.reset(),M.Instance.clear(),this.stage.addComponent(w)},e.initPlayer=function(){var t,n=this.level.player,e=I("player"),i=e.addComponent(R);L.Instance.player=i,this.stage.addChild(e),i.init(n),(t=this.waitList).push.apply(t,i.fsm.waitList)},e.initSmoke=function(){var t,n=I("smoke"),e=n.addComponent(C);this.stage.addChild(n),e.init({x:0,y:0,direction:o.TOP,state:c.IDLE,type:u.SMOKE}),(t=this.waitList).push.apply(t,e.fsm.waitList)},e.initEnemys=function(){var t=this;this.level.enemies.forEach((function(n,e){var i,s=I("enemy_"+e),a=s.addComponent(b);t.stage.addChild(s),L.Instance.enemys.push(a),a.init(n),(i=t.waitList).push.apply(i,a.fsm.waitList)}))},e.adaptStage=function(){var t=L.Instance,n=t.mapColCount,e=t.mapRowCount,i=E.WIDTH*n/2,s=E.HEIGHT*e/2;this.stage.setPosition(-i,s+80)},e.initDoor=function(){var t,n=this.level.door,e=I("door"),i=e.addComponent(x);this.stage.addChild(e),L.Instance.door=i,i.init(n),(t=this.waitList).push.apply(t,i.fsm.waitList)},e.initBursts=function(){var t=this,n=this.level.bursts,e=L.Instance.mapInfo;n.forEach((function(n,i){var s;e[n.y][n.x]=null;var a=I("burst_"+i),r=a.addComponent(_);t.stage.addChild(a),L.Instance.bursts.push(r),r.init(n),(s=t.waitList).push.apply(s,r.fsm.waitList)}))},e.initSpikes=function(){var t=this,n=this.level.spikes,e=L.Instance.mapInfo;n.forEach((function(n,i){var s;e[n.y][n.x]=null;var a=I("spike_"+i),r=a.addComponent(D);t.stage.addChild(a),L.Instance.spikes.push(r),r.init(n),(s=t.waitList).push.apply(s,r.fsm.waitList)}))},e.undo=function(){var t=L.Instance.records.pop();if(t){var n=L.Instance,e=n.player,i=n.door,s=n.enemys,a=n.bursts,r=n.spikes;v(t.player,e),v(t.door,i),s.forEach((function(n,e){return v(t.enemys[e],n)})),a.forEach((function(n,e){return v(t.bursts[e],n)})),r.forEach((function(n,e){return v(t.spikes[e],n)})),e.targetPos.x=t.player.x,e.targetPos.y=t.player.y}},e.record=function(){var t=L.Instance,n=t.records,e=t.player,i=t.door,s=t.enemys,a=t.bursts,r=t.spikes,o={player:g(e),door:g(i),enemys:s.map((function(t){return g(t)})),bursts:a.map((function(t){return g(t)})),spikes:r.map((function(t){return g(t)}))};n.push(o)},n}(a)).prototype,"stage",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=l(U.prototype,"menu",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=l(U.prototype,"ctrls",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=U))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/level2.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,_,s,T,R;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,_=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,s=t.ENTITY_TYPE_ENUM,T=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,R=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"57663vMpPVBw57+TotYTIzc","level2",void 0);var i={x:2,y:0,direction:E.BOTTOM,state:_.IDLE,type:s.PLAYER},c=[{x:3,y:2,direction:E.TOP,state:T.IDLE,type:s.ENEMY},{x:4,y:3,direction:E.TOP,state:T.IDLE,type:s.ENEMY_IRON}],n={x:5,y:3,direction:E.LEFT,state:R.IDLE,type:s.DOOR};t("default",{mapInfo:[[0,8,9,1,8,2],[4,9,9,9,9,4],[4,9,9,9,1,3],[4,9,9,9,9,9],[4,9,9,9,9,4],[1,8,8,8,8,3],[5,7,7,7,7,6]],player:i,enemies:c,spikes:[],bursts:[],door:n});e._RF.pop()}}}));

System.register("chunks:///_virtual/AnState.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./constant.ts"],(function(t){"use strict";var i,a,e,n,s,h,o,r,u,c,p,l,f;return{setters:[function(t){i=t.cclegacy,a=t.animation,e=t.Sprite,n=t.AnimationClip,s=t.Animation},function(t){h=t.DIRECTION_ENUM,o=t.COUNT_ENUM,r=t.FSM_STATE_NUM_PARAMS_ENUM},function(t){u=t.defineProperty},function(t){c=t.loadDir,p=t.getDirKeyValue,l=t.getCountKeyValue},function(t){f=t.PLAYER_CONST}],execute:function(){i._RF.push({},"59ccbQGanpC8o79MrAPVIzP","AnState",void 0);t("default",function(){function t(t,i,a,e,s,h){void 0===a&&(a=n.WrapMode.Normal),void 0===e&&(e=!0),void 0===h&&(h=r.DIRECTION),u(this,"animationClips",new Map),u(this,"path",void 0),this.fsm=t,this.basePath=i,this.wrapMode=a,this.hasSubState=e,this.defaultSub=h,e?(this.path=""+i+s,h===r.DIRECTION?this.setDirSubStates():this.setCountSubStates()):(this.path=i,this.init(i))}var i=t.prototype;return i.setDirSubStates=function(){for(var t=0,i=Object.keys(h);t<i.length;t++){var a=i[t],e=this.basePath+h[a];this.init(e)}},i.setCountSubStates=function(){for(var t=0,i=Object.keys(o);t<i.length;t++){var a=i[t],e=this.basePath+o[a];this.init(e)}},i.init=function(t){var i=this,s=c(t).then((function(s){if(null==s?void 0:s.length){var h=new a.ObjectTrack;h.path=(new a.TrackPath).toComponent(e).toProperty("spriteFrame");var o=s.map((function(t,i){return[f.ANIMATION_SPEED*i,t]}));h.channel.curve.assignSorted(o);var r=new n;i.animationClips.set(t,r),r.name=t,r.duration=s.length*f.ANIMATION_SPEED,r.addTrack(h),r.wrapMode=i.wrapMode}}));this.fsm.waitList.push(s)},i.runAction=function(){var t,i=this.fsm.getComponent(s);(null===(t=i.defaultClip)||void 0===t?void 0:t.name)!==this.path&&(i.defaultClip=this.animationClips.get(this.path),i.play())},i.stateChange=function(){if(this.hasSubState)if(this.defaultSub===r.DIRECTION){var t=this.fsm.getParams(r.DIRECTION);this.path=this.basePath+p(t)}else{var i=this.fsm.getParams(r.COUNT);this.path=this.basePath+l(i)}else this.path=this.basePath;this.runAction()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAnimationSubFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./SubFSM.ts","./Utils.ts","./AnState.ts"],(function(t){"use strict";var e,n,a,s,i,u,r,o,c;return{setters:[function(t){e=t.cclegacy,n=t.AnimationClip},function(t){a=t.FSM_STATE_NUM_PARAMS_ENUM,s=t.RES_PATH,i=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM},function(t){u=t.inheritsLoose},function(t){r=t.default},function(t){o=t.getDirKeyValue},function(t){c=t.default}],execute:function(){e._RF.push({},"5b8a7hUUvZEPapgLs090Tff","PlayerAnimationSubFSM",void 0);t("default",function(t){function e(e,u){var r;(r=t.call(this,e)||this).fsm=e,r.paramsKey=u;var f=r.fsm.getParams(a.DIRECTION),l=o(f);return r.stateMachine.set(u,new c(r.fsm,s.PLAYER_BASE_ATLAS+"/"+u+"/",u===i.IDLE?n.WrapMode.Loop:n.WrapMode.Normal,!0,l)),r}return u(e,t),e.prototype.stateChange=function(){this.currentState=this.stateMachine.get(this.paramsKey)},e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/FSM.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,a,n,s,r,i;return{setters:[function(t){e=t.cclegacy,a=t.Component},function(t){n=t.inheritsLoose,s=t.createClass,r=t.defineProperty,i=t.assertThisInitialized}],execute:function(){var c;t("FSM_PARAM_TYPE_ENUM",void 0),e._RF.push({},"5d54dOkPOZKUJqqiG62Gb7I","FSM",void 0),function(t){t.NUMBER="NUMBER",t.TRIGGER="TRIGGER"}(c||(c=t("FSM_PARAM_TYPE_ENUM",{})));t("default",function(t){function e(){for(var e,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,r(i(e),"params",new Map),r(i(e),"stateMachine",new Map),r(i(e),"waitList",[]),r(i(e),"_currentState",void 0),e}n(e,t);var a=e.prototype;return a.getParams=function(t){if(this.params.has(t))return this.params.get(t).value},a.setParams=function(t,e){this.params.has(t)&&(this.params.get(t).value=e,this.paramsChange(t))},a.paramsChange=function(t){this.stateMachine.has(t)?this.currentState=this.stateMachine.get(t):this.stateChange(t)},s(e,[{key:"currentState",get:function(){return this._currentState},set:function(t){t&&(this._currentState=t,this._currentState.stateChange())}}]),e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/level9.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,T,n,y,i,s;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,T=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,n=t.ENTITY_TYPE_ENUM,y=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,i=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,s=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"61afa0L7E5EK7yM889pwy00","level9",void 0);var R={x:2,y:11,direction:E.TOP,state:T.IDLE,type:n.PLAYER},_=[{x:1,y:1,direction:E.BOTTOM,state:y.IDLE,type:n.ENEMY},{x:2,y:7,direction:E.BOTTOM,state:y.IDLE,type:n.ENEMY}],S=[{x:1,y:3,type:n.SPIKES,state:i.THREE},{x:3,y:6,type:n.SPIKES,state:i.ONE},{x:2,y:9,type:n.SPIKES,state:i.TWO}],l=[{x:3,y:1,state:T.IDLE,type:n.BURST,direction:E.TOP},{x:3,y:4,state:T.IDLE,type:n.BURST,direction:E.TOP},{x:3,y:5,state:T.IDLE,type:n.BURST,direction:E.TOP},{x:2,y:10,state:T.IDLE,type:n.BURST,direction:E.TOP},{x:3,y:10,state:T.IDLE,type:n.BURST,direction:E.TOP}],a={x:0,y:1,direction:E.LEFT,state:s.IDLE,type:n.DOOR};t("default",{mapInfo:[[1,8,8,8,2],[9,9,9,7,4],[4,7,7,9,4],[4,9,9,9,4],[4,9,9,7,4],[1,8,2,null,4],[null,2,3,9,4],[null,4,9,9,4],[null,4,9,9,4],[null,4,9,9,4],[null,4,7,7,4],[null,1,9,1,3],[null,7,5,7,6]],player:R,enemies:_,spikes:S,bursts:l,door:a});e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./EntityManager.ts","./EventMgr.ts","./DataMgr.ts","./SpikesAnimationFSM.ts"],(function(t){"use strict";var n,s,i,o,e,r,a,c,u,f,h,l,E,p;return{setters:[function(t){n=t.cclegacy,s=t._decorator},function(t){i=t.COUNT_ORDER_ENUM,o=t.EVENT_ENUM,e=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM},function(t){r=t.inheritsLoose,a=t.defineProperty,c=t.assertThisInitialized},function(t){u=t.getTotalCount,f=t.allSettled},function(t){h=t.EntityManager},function(t){l=t.default},function(t){E=t.default},function(t){p=t.default}],execute:function(){var M;n._RF.push({},"63f74hI10tA9roq7FyG07fo","SpikesMgr",void 0);var v=s.ccclass;t("SpikesMgr",v("SpikesMgr")(M=function(t){function n(){for(var n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n=t.call.apply(t,[this].concat(i))||this,a(c(n),"totalCount",0),n}r(n,t);var s=n.prototype;return s.init=function(n){var s=this;this.fsm=this.addComponent(p),this.totalCount=u(n.state),this.fsm.init(this.totalCount),f(this.fsm.waitList).then((function(){t.prototype.init.call(s,n),s.setEvents(),s.currentCount=i.ZERO}))},s.setEvents=function(){l.Instance.on(o.PLAYER_MOVE_END,this.playerMoveEnd,this)},s.playerMoveEnd=function(){this.currentCount=(this.currentCount+1+this.totalCount)%this.totalCount,this.checkToAttack()},s.checkToAttack=function(){var t=E.Instance.player;this.pos.x===t.pos.x&&this.pos.y===t.pos.y&&this.currentCount===this.totalCount-1&&l.Instance.emit(o.PLAYER_DEATH)},s.onDestroy=function(){this.offEvents()},s.toDeath=function(t){this.id===t&&(this.state=e.DEATH,this.offEvents())},s.offEvents=function(){l.Instance.off(o.PLAYER_MOVE_END,this.playerMoveEnd,this)},n}(h))||M);n._RF.pop()}}}));

System.register("chunks:///_virtual/level14.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,T,i,n,s,R;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,T=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,i=t.ENTITY_TYPE_ENUM,n=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,s=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,R=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"640c9a4/jFEn47Z9q7w6m1v","level14",void 0);var _={x:1,y:0,direction:E.BOTTOM,state:T.IDLE,type:i.PLAYER},y=[{x:3,y:4,direction:E.TOP,state:n.IDLE,type:i.ENEMY},{x:8,y:3,direction:E.LEFT,state:n.IDLE,type:i.ENEMY}],c=[{x:3,y:2,type:i.SPIKES,state:s.TWO}],S=[{x:1,y:4,state:T.IDLE,type:i.BURST,direction:E.TOP},{x:5,y:2,state:T.IDLE,type:i.BURST,direction:E.TOP},{x:5,y:4,state:T.IDLE,type:i.BURST,direction:E.TOP},{x:7,y:3,state:T.IDLE,type:i.BURST,direction:E.TOP},{x:7,y:4,state:T.IDLE,type:i.BURST,direction:E.TOP},{x:8,y:2,state:T.IDLE,type:i.BURST,direction:E.TOP}],r={x:10,y:1,direction:E.LEFT,state:R.IDLE,type:i.DOOR};t("default",{mapInfo:[[0,9,8,8,8,8,8,8,8,8,8],[4,9,9,9,9,9,9,4,9,9,9],[4,9,9,9,9,6,9,3,7,9,2],[4,9,9,7,9,9,9,7,9,0,3],[4,7,9,9,9,6,9,null,9,4,7],[1,8,8,8,8,8,8,8,8,3,null],[5,7,6,7,7,7,7,7,7,7,null]],player:_,enemies:y,spikes:c,bursts:S,door:r});e._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc","./Enums.ts"],(function(n){"use strict";var e,t,c;return{setters:[function(n){e=n.cclegacy,t=n.Vec2},function(n){c=n.DIRECTION_ENUM}],execute:function(){e._RF.push({},"6da8cla4NNDpY5JjRXDh7PS","constant",void 0);n("TILE_CONST",{WIDTH:55,HEIGHT:55}),n("PLAYER_CONST",{ANIMATION_SPEED:1/8,MOVE_SPEED:.1}),n("DirectionVec2",new Map([[c.TOP,new t(0,-1)],[c.RIGHT,new t(1,0)],[c.BOTTOM,new t(0,1)],[c.LEFT,new t(-1,0)]])),n("EnemyLookAtPlayerDir",new Map([[c.TOP,[45,135]],[c.RIGHT,[135,225]],[c.BOTTOM,[225,315]],[c.LEFT,[315,45]]]));e._RF.pop()}}}));

System.register("chunks:///_virtual/level21.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,l,n,E,u,i;return{setters:[function(t){e=t.cclegacy},function(t){l=t.DIRECTION_ORDER_ENUM,n=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,E=t.ENTITY_TYPE_ENUM,u=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,i=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"74955w75BVFLL1b2YFc2+Ma","level21",void 0);var T={x:0,y:7,direction:l.TOP,state:n.IDLE,type:E.PLAYER},s=[{x:2,y:6,direction:l.LEFT,state:u.IDLE,type:E.ENEMY}],R=[{x:2,y:3,state:n.IDLE,type:E.BURST,direction:l.TOP},{x:2,y:5,state:n.IDLE,type:E.BURST,direction:l.TOP},{x:3,y:3,state:n.IDLE,type:E.BURST,direction:l.TOP},{x:3,y:4,state:n.IDLE,type:E.BURST,direction:l.TOP}],_={x:7,y:6,direction:l.LEFT,state:i.IDLE,type:E.DOOR};t("default",{mapInfo:[[null,null,null,null,null,null,0,8,2],[9,9,9,9,9,9,9,9,4],[9,0,8,8,8,8,9,9,4],[9,4,7,7,9,9,9,9,4],[9,4,9,null,0,8,8,8,3],[9,4,7,9,1,8,8,8,6],[9,4,9,9,9,9,9,9,null],[9,1,8,8,8,3,7,6,null],[5,7,7,7,7,6,null,null,null]],player:T,enemies:s,spikes:[],bursts:R,door:_});e._RF.pop()}}}));

System.register("chunks:///_virtual/MenuMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./EventMgr.ts"],(function(n){"use strict";var t,e,r,o,c,u,i,s;return{setters:[function(n){t=n.cclegacy,e=n._decorator,r=n.director,o=n.Component},function(n){c=n.EVENT_ENUM,u=n.SCENE_ENUM},function(n){i=n.inheritsLoose},function(n){s=n.default}],execute:function(){var a;t._RF.push({},"83437bRPiJMyZ5mV3zgdMId","MenuMgr",void 0);var l=e.ccclass;e.property,n("ControlMgr",l("MenuMgr")(a=function(n){function t(){return n.apply(this,arguments)||this}i(t,n);var e=t.prototype;return e.handleUndo=function(n){s.Instance.emit(c.UNDO)},e.handleRestart=function(n){s.Instance.emit(c.RESTART)},e.handleOut=function(n){this.node.destroy(),r.loadScene(u.START)},t}(o))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.cclegacy},function(n){e=n.defineProperty}],execute:function(){t._RF.push({},"83de3KD1AVA260xlQ7Yjv2n","Singleton",void 0);var i=n("default",function(){function n(){}return n.getInstance=function(){return this._instance||(this._instance=new this),this._instance},n}());e(i,"_instance",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/level18.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,l,E,n,u,T,_;return{setters:[function(t){e=t.cclegacy},function(t){l=t.DIRECTION_ORDER_ENUM,E=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,n=t.ENTITY_TYPE_ENUM,u=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,T=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,_=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"872dcOhjVNFwZlabzf/RYsI","level18",void 0);var s={x:3,y:8,direction:l.LEFT,state:E.IDLE,type:n.PLAYER},R=[{x:1,y:1,direction:l.BOTTOM,state:u.IDLE,type:n.ENEMY},{x:3,y:2,direction:l.BOTTOM,state:u.IDLE,type:n.ENEMY}],S=[{x:1,y:4,type:n.SPIKES,state:T.TWO},{x:1,y:6,type:n.SPIKES,state:T.TWO},{x:1,y:8,type:n.SPIKES,state:T.FOUR}],i=[{x:1,y:5,state:E.IDLE,type:n.BURST,direction:l.TOP},{x:2,y:9,state:E.IDLE,type:n.BURST,direction:l.TOP}],y={x:5,y:2,direction:l.LEFT,state:_.IDLE,type:n.DOOR};t("default",{mapInfo:[[0,8,8,2,null,null],[4,9,7,1,8,8],[4,9,9,9,9,9],[4,9,0,8,8,8],[4,9,4,7,7,7],[4,7,4,null,null,null],[4,9,4,null,null,null],[4,9,1,8,null,null],[4,9,9,9,null,null],[4,9,7,4,null,null],[1,8,8,3,null,null],[5,7,7,6,null,null]],player:s,enemies:R,spikes:S,bursts:i,door:y});e._RF.pop()}}}));

System.register("chunks:///_virtual/ControlMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./EventMgr.ts"],(function(t){"use strict";var n,r,o,e,c,u;return{setters:[function(t){n=t.cclegacy,r=t._decorator,o=t.Component},function(t){e=t.EVENT_ENUM},function(t){c=t.inheritsLoose},function(t){u=t.default}],execute:function(){var s;n._RF.push({},"8be05gJuelNILahEWFkO74j","ControlMgr",void 0);var i=r.ccclass;r.property,t("ControlMgr",i("ControlMgr")(s=function(t){function n(){return t.apply(this,arguments)||this}return c(n,t),n.prototype.handlectrl=function(t,n){u.Instance.emit(e.PLAYER_CTRL,n)},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesAnimationSubFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./SubFSM.ts","./Utils.ts","./AnState.ts"],(function(t){"use strict";var e,n,i,s,a,u,o;return{setters:[function(t){e=t.cclegacy,n=t.AnimationClip},function(t){i=t.FSM_STATE_NUM_PARAMS_ENUM},function(t){s=t.inheritsLoose},function(t){a=t.default},function(t){u=t.getDirKeyValue},function(t){o=t.default}],execute:function(){e._RF.push({},"8f04fPaibNJ0bqKw1HGpoPa","SpikesAnimationSubFSM",void 0);t("default",function(t){function e(e,s,a){var r;(r=t.call(this,e)||this).fsm=e,r.paramsKey=s;var c=r.fsm.getParams(i.COUNT),f=u(c);return r.stateMachine.set(s,new o(r.fsm,a+"/"+s+"/",n.WrapMode.Normal,!0,f,i.COUNT)),r}return s(e,t),e.prototype.stateChange=function(){this.currentState=this.stateMachine.get(this.paramsKey)},e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/level7.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,_,s,S,T,R;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,_=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,s=t.ENTITY_TYPE_ENUM,S=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,T=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,R=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"90be9n8z5FE3aUbaDXlvw23","level7",void 0);var n={x:2,y:7,direction:E.TOP,state:_.IDLE,type:s.PLAYER},y=[{x:2,y:2,direction:E.BOTTOM,state:S.IDLE,type:s.ENEMY}],M=[{x:1,y:4,type:s.SPIKES,state:T.ONE},{x:2,y:4,type:s.SPIKES,state:T.TWO},{x:3,y:4,type:s.SPIKES,state:T.TWO},{x:4,y:4,type:s.SPIKES,state:T.THREE}],a={x:2,y:0,direction:E.TOP,state:R.IDLE,type:s.DOOR};t("default",{mapInfo:[[0,3,9,1,8,2],[4,9,9,9,9,4],[4,9,9,9,9,4],[4,9,9,9,9,4],[4,9,9,9,9,4],[4,9,9,9,9,4],[4,9,9,9,9,4],[1,3,9,1,8,3],[5,7,7,7,7,6]],player:n,enemies:y,spikes:M,bursts:[],door:a});e._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./constant.ts"],(function(t){"use strict";var e,i,l,n,s,T,o;return{setters:[function(t){e=t.cclegacy,i=t.UITransform,l=t.Sprite},function(t){n=t.TILE_TYPE_ENUM},function(t){s=t.defineProperty},function(t){T=t.createNode},function(t){o=t.TILE_CONST}],execute:function(){e._RF.push({},"9d015vkAftKrqRukVELdXax","Tile",void 0);var r=t("default",(function t(e,n,o){s(this,"name",void 0),s(this,"spriteFrame",void 0),s(this,"node",void 0);var r=T(e),L=r.getComponent(i);r.addComponent(l).spriteFrame=o,L.setContentSize(t.WIDTH,t.HEIGHT),this.node=r,this.name=e,this.spriteFrame=o}));s(r,"HEIGHT",o.HEIGHT),s(r,"WIDTH",o.WIDTH),s(r,"TileSrc",new Map([[n.WALL_LEFT_TOP,["tile (20)","tile (13)"]],[n.WALL_LEFT_BOTTOM,["tile (10)","tile (13)","tile (20)","tile (23)"]],[n.WALL_RIGHT_TOP,["tile (14)","tile (21)"]],[n.WALL_RIGHT_BOTTOM,["tile (21)","tile (23)"]],[n.WALL_COLUMN,["tile (5)","tile (6)","tile (7)","tile (8)"]],[n.CLIFF_LEFT,["tile (18)"]],[n.CLIFF_RIGHT,["tile (17)","tile (19)"]],[n.CLIFF_CENTER,["tile (17)","tile (19)"]],[n.WALL_ROW,["tile (9)","tile (10)","tile (11)","tile (12)","tile (20)","tile (21)","tile (23)","tile (24)","tile (28)"]],[n.FLOOR,["tile (1)","tile (1)","tile (1)","tile (1)","tile (1)","tile (1)","tile (1)","tile (1)","tile (2)","tile (3)","tile (4)"]],[n.TOP_CORNER,["tile (15)","tile (16)","tile (27)"]]])),e._RF.pop()}}}));

System.register("chunks:///_virtual/EntityManager.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./constant.ts"],(function(t){"use strict";var e,n,i,s,r,o,c,u,a,h,f,p,y;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Vec2,s=t.UITransform,r=t.Sprite,o=t.Component},function(t){c=t.FSM_STATE_NUM_PARAMS_ENUM},function(t){u=t.inheritsLoose,a=t.defineProperty,h=t.assertThisInitialized,f=t.createClass},function(t){p=t.createID},function(t){y=t.TILE_CONST}],execute:function(){var d;e._RF.push({},"a5b827jTPtHOrke8enK52VL","EntityManager",void 0);var _=n.ccclass;n.property,t("EntityManager",_("EntityManager")(d=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,a(h(e),"id",""),a(h(e),"type",void 0),a(h(e),"pos",new i(0,0)),a(h(e),"targetPos",new i(0,0)),a(h(e),"_state",void 0),a(h(e),"_currentDir",void 0),a(h(e),"_currentCount",void 0),a(h(e),"fsm",void 0),e}u(e,t);var n=e.prototype;return n.init=function(t){this.render(),this.state=t.state,this.currentDir=t.direction,this.pos=new i(t.x,t.y),this.id=p(t.type),this.type=t.type},n.render=function(){this.getComponent(s).setContentSize(4*y.WIDTH,4*y.HEIGHT),this.addComponent(r).sizeMode=r.SizeMode.CUSTOM},n.update=function(t){this.setEntityPosition()},n.setEntityPosition=function(){this.node.setPosition(this.pos.x*y.WIDTH-1.5*y.WIDTH,-this.pos.y*y.HEIGHT+1.5*y.HEIGHT)},f(e,[{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.fsm.setParams(t,!0)}},{key:"currentDir",get:function(){return this._currentDir},set:function(t){this._currentDir=t,this.fsm.setParams(c.DIRECTION,t)}},{key:"currentCount",get:function(){return this._currentCount},set:function(t){this._currentCount=t,this.fsm.setParams(c.COUNT,t)}}]),e}(o))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc","./Enums.ts"],(function(t){"use strict";var n,e,r,u,o,a,i,c,s,f,l,d,_,E,R;return{setters:[function(t){n=t.cclegacy,e=t.Layers,r=t.Node,u=t.UITransform,o=t.resources,a=t.SpriteFrame,i=t.SpriteAtlas,c=t.Vec2},function(t){s=t.DIRECTION_ENUM,f=t.DIRECTION_ORDER_ENUM,l=t.COUNT_ENUM,d=t.COUNT_ORDER_ENUM,_=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,E=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,R=t.TOTAL_COUNT_ENUM}],execute:function(){t("deepClone",(function t(n,e){void 0===e&&(e=new WeakMap);if(null===n||"object"!=typeof n)return n;if(e.has(n))return e.get(n);var r=Array.isArray(n)?[]:{};for(var u in e.set(n,r),n)n.hasOwnProperty(u)&&(r[u]=t(n[u],e));return r})),n._RF.push({},"a677fBGgllKgp4uwR26bzVx","Utils",void 0);var T=t("getUiLayer",(function(){return 1<<e.nameToLayer("UI_2D")})),m=(t("createNode",(function(t){var n=new r(t);return n.addComponent(u).setAnchorPoint(0,1),n.layer=T(),n})),t("loadDir",(function(t){return new Promise((function(n,e){o.loadDir(t,a,(function(t,r){t?e(t):n(m(r))}))}))})),t("loadAtlas",(function(t){return new Promise((function(n,e){o.load(t,i,(function(t,r){t?e(t):n(r)}))}))})),t("assetsSort",(function(t){return t.sort((function(t,n){var e,r,u=t.name,o=n.name;return parseInt((null===(e=u.match(/\d+/))||void 0===e?void 0:e[0])||"0",10)-parseInt((null===(r=o.match(/\d+/))||void 0===r?void 0:r[0])||"0",10)}))})));t("randomNum",(function(t,n){return Math.floor(Math.random()*(n-t)+t)})),t("getDirKeyValue",(function(t){return s[f[t]]})),t("getDirKeyValueNum",(function(t){var n=y(s,t);return f[n]})),t("getCountKeyValue",(function(t){return l[d[t]]})),t("getCountKeyValueNum",(function(t){var n=y(l,t);return d[n]}));function y(t,n){return Object.keys(t).find((function(e){return t[e]===n}))}t("getBlockState",(function(t,n){return t.equals(n)?_.BLOCK_FRONT:t.equals(new c(-n.x,-n.y))?_.BLOCK_BACK:t.equals(new c(-n.y,n.x))?_.BLOCK_RIGHT:t.equals(new c(n.y,-n.x))?_.BLOCK_LEFT:void 0})),t("createID",(function(t){return t?t+"-"+Math.random().toString(36).substr(2):Math.random().toString(36).substr(2)})),t("allSettled",(function(t){return Promise.all(t.map((function(t){return Promise.resolve(t).then((function(t){return{status:"fulfilled",value:t}})).catch((function(t){return{status:"rejected",reason:t}}))})))})),t("getTotalCount",(function(t){switch(t){case E.ONE:return R.TWO;case E.TWO:return R.THREE;case E.THREE:return R.FOUR;case E.FOUR:return R.FIVE}}));t("setData",(function(t){if(t)return{x:t.pos.x,y:t.pos.y,count:t.currentCount,direction:t.currentDir,state:t.state}})),t("setReData",(function(t,n){t&&n&&(n.pos.x=t.x,n.pos.y=t.y,n.currentCount=t.count,n.currentDir=t.direction,n.state=t.state)}));n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js"],(function(r){"use strict";var e,t,n,i,o,a,c,s,l,u,g,p;return{setters:[function(r){e=r.cclegacy,t=r._decorator,n=r.ProgressBar,i=r.Label,o=r.resources,a=r.director,c=r.Component},function(r){s=r.SCENE_ENUM},function(r){l=r.applyDecoratedDescriptor,u=r.inheritsLoose,g=r.initializerDefineProperty,p=r.assertThisInitialized}],execute:function(){var d,f,b,h,y,L,v;e._RF.push({},"a9ccaRV6wBO7b/WGEBLM9oK","LoadingMgr",void 0);var x=t.ccclass,M=t.property;r("LoadingMgr",(d=x("LoadingMgr"),f=M(n),b=M(i),d((L=l((y=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n))||this,g(p(e),"bar",L,p(e)),g(p(e),"loadingText",v,p(e)),e}return u(e,r),e.prototype.onLoad=function(){var r=this;this.bar.progress=0,this.loadingText.string="游戏资源加载中......0%",o.preloadDir("texture/",(function(e,t){r.bar.progress=e/t,r.loadingText.string="游戏资源加载中......"+(e/t*100).toFixed(2)+"%"}),(function(){a.loadScene(s.START)}))},e}(c)).prototype,"bar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=l(y.prototype,"loadingText",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));e._RF.pop()}}}));

System.register("chunks:///_virtual/level5.ts",["cc","./Enums.ts"],(function(e){"use strict";var t,E,_,s,R,T;return{setters:[function(e){t=e.cclegacy},function(e){E=e.DIRECTION_ORDER_ENUM,_=e.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,s=e.ENTITY_TYPE_ENUM,R=e.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,T=e.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){t._RF.push({},"ba8b5qZ7O5Jo72+8yTZpz17","level5",void 0);var i={x:1,y:3,direction:E.TOP,state:_.IDLE,type:s.PLAYER},n=[{x:5,y:1,direction:E.LEFT,state:R.IDLE,type:s.ENEMY}],c={x:6,y:1,direction:E.LEFT,state:T.IDLE,type:s.DOOR};e("default",{mapInfo:[[0,8,8,8,8,8,3],[4,9,9,9,9,9,9],[4,9,7,7,7,7,7],[1,9,8,8,8,8,8],[5,7,7,7,7,7,6]],player:i,enemies:n,spikes:[],bursts:[],door:c});t._RF.pop()}}}));

System.register("chunks:///_virtual/level1.ts",["cc","./Enums.ts"],(function(e){"use strict";var t,E,_,n,s,R;return{setters:[function(e){t=e.cclegacy},function(e){E=e.DIRECTION_ORDER_ENUM,_=e.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,n=e.ENTITY_TYPE_ENUM,s=e.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,R=e.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){t._RF.push({},"bd0e01QjSRADqz+2vPZJgKm","level1",void 0);var l={x:2,y:8,direction:E.TOP,state:_.IDLE,type:n.PLAYER},u=[{x:7,y:6,direction:E.TOP,state:s.IDLE,type:n.ENEMY}],i={x:7,y:8,direction:E.TOP,state:R.IDLE,type:n.DOOR};e("default",{mapInfo:[[null,10,8,8,10,null,10,8,8,10],[null,4,9,9,1,8,3,9,9,4],[null,4,9,9,9,9,9,9,9,4],[null,4,9,10,8,8,10,9,10,3],[10,3,9,0,10,10,3,9,1,10],[4,9,9,9,4,4,9,9,9,4],[4,9,9,9,4,4,9,9,9,4],[4,9,9,9,4,4,9,9,9,4],[1,3,9,1,3,1,3,9,1,3],[6,7,7,7,6,5,6,7,7,6]],player:l,enemies:u,spikes:[],bursts:[],door:i});t._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyAnimationSubFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./SubFSM.ts","./Utils.ts","./AnState.ts"],(function(t){"use strict";var e,n,s,i,a,u,o,r;return{setters:[function(t){e=t.cclegacy,n=t.AnimationClip},function(t){s=t.FSM_STATE_NUM_PARAMS_ENUM,i=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM},function(t){a=t.inheritsLoose},function(t){u=t.default},function(t){o=t.getDirKeyValue},function(t){r=t.default}],execute:function(){e._RF.push({},"c4b89ZsmeVNQpSBujB7yrle","EnemyAnimationSubFSM",void 0);t("default",function(t){function e(e,a,u){var c;(c=t.call(this,e)||this).fsm=e,c.paramsKey=a;var f=c.fsm.getParams(s.DIRECTION),l=o(f);return c.stateMachine.set(a,new r(c.fsm,u+"/"+a+"/",a===i.IDLE?n.WrapMode.Loop:n.WrapMode.Normal,!0,l)),c}return a(e,t),e.prototype.stateChange=function(){this.currentState=this.stateMachine.get(this.paramsKey)},e}(u));e._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts"],(function(t){"use strict";var e,n,i,c,s,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose,i=t.createClass,c=t.defineProperty,s=t.assertThisInitialized},function(t){a=t.default}],execute:function(){e._RF.push({},"c7b77PXFf9HeI11EzMiRvFS","EventMgr",void 0);t("default",function(t){function e(){var e;return e=t.call(this)||this,c(s(e),"_eventDict",new Map),e}n(e,t);var a=e.prototype;return a.on=function(t,e,n){this._eventDict.has(t)?this._eventDict.get(t).push({callback:e,ctx:n}):this._eventDict.set(t,[{callback:e,ctx:n}])},a.off=function(t,e,n){if(this._eventDict.has(t)){var i=this._eventDict.get(t),c=i.findIndex((function(t){return t.callback===e&&(void 0===n||t.ctx===n)}));c>-1&&i.splice(c,1)}},a.emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this._eventDict.has(t)&&this._eventDict.get(t).forEach((function(t){var e=t.callback,i=t.ctx;i?e.apply(i,n):e.apply(void 0,n)}))},a.clear=function(){this._eventDict.clear()},i(e,null,[{key:"Instance",get:function(){return t.getInstance.call(this)}}]),e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/SubFSM.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,n,u;return{setters:[function(t){e=t.cclegacy},function(t){n=t.createClass,u=t.defineProperty}],execute:function(){e._RF.push({},"c9c5eluwwZEVJtk6bDcNAuN","SubFSM",void 0);t("default",function(){function t(t){u(this,"stateMachine",new Map),u(this,"_currentState",void 0),this.fsm=t}return n(t,[{key:"currentState",get:function(){return this._currentState},set:function(t){t&&(this._currentState=t,this._currentState.stateChange())}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./constant.ts","./EntityManager.ts","./EventMgr.ts","./DataMgr.ts","./EnemyAnimationFSM.ts"],(function(t){"use strict";var n,s,e,o,i,a,r,c,E,h,f,u,l,y,p,M,A;return{setters:[function(t){n=t.cclegacy,s=t._decorator,e=t.Vec2},function(t){o=t.EVENT_ENUM,i=t.DIRECTION_ENUM,a=t.DIRECTION_ORDER_ENUM,r=t.ENTITY_TYPE_ENUM,c=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM},function(t){E=t.inheritsLoose,h=t.createForOfIteratorHelperLoose},function(t){f=t.allSettled,u=t.getDirKeyValueNum},function(t){l=t.EnemyLookAtPlayerDir},function(t){y=t.EntityManager},function(t){p=t.default},function(t){M=t.default},function(t){A=t.default}],execute:function(){var _;n._RF.push({},"cca2cXkQalPgqA5HVWc11nD","EnemyMgr",void 0);var v=s.ccclass;t("EnemyMgr",v("EnemyMgr")(_=function(t){function n(){return t.apply(this,arguments)||this}E(n,t);var s=n.prototype;return s.init=function(n){var s=this;this.fsm=this.addComponent(A),this.fsm.init(n.type),f(this.fsm.waitList).then((function(){t.prototype.init.call(s,n),s.setEvents()}))},s.setEvents=function(){p.Instance.on(o.PLAYER_BORN,this.lookAtPlayer,this),p.Instance.on(o.PLAYER_MOVE_END,this.playerMoveEnd,this),p.Instance.on(o.PLAYER_ATTACK,this.toDeath,this)},s.lookAtPlayer=function(){var t=M.Instance.player,n=new e(this.pos.x-t.pos.x,this.pos.y-t.pos.y),s=180*Math.atan2(n.y,n.x)/Math.PI;s<0&&(s+=360);for(var o,r=h(l.keys());!(o=r()).done;){var c=o.value;if(c!==i.LEFT){var E=l.get(c);if(s>E[0]&&s<=E[1])return void(this.currentDir=u(c))}}this.currentDir=a.LEFT},s.playerMoveEnd=function(){this.lookAtPlayer(),this.type===r.ENEMY&&this.checkToAttack()},s.checkToAttack=function(){var t=M.Instance.player;(this.pos.x===t.pos.x&&Math.abs(this.pos.y-t.pos.y)<=1||this.pos.y===t.pos.y&&Math.abs(this.pos.x-t.pos.x)<=1)&&(this.state=c.ATTACK,p.Instance.emit(o.PLAYER_DEATH))},s.onDestroy=function(){this.offEvents()},s.toDeath=function(t){this.id===t&&(this.state=c.DEATH,this.offEvents())},s.offEvents=function(){p.Instance.off(o.PLAYER_BORN,this.lookAtPlayer,this),p.Instance.off(o.PLAYER_MOVE_END,this.playerMoveEnd,this),p.Instance.off(o.PLAYER_ATTACK,this.toDeath,this)},n}(y))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/DrawManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,i,s,a,n,o,r,h,l,c,u,d;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.view,a=t.BlockInputEvents,n=t.Graphics,o=t.UITransform,r=t.Color,h=t.game,l=t.Component},function(t){c=t.inheritsLoose,u=t.defineProperty,d=t.assertThisInitialized}],execute:function(){var f;e._RF.push({},"cdb59qvUz5IoriQVJFvZbCW","DrawManager",void 0);var p,v=i.ccclass,A=s.getVisibleSize().width,D=s.getVisibleSize().height,m=t("DEFAULT_FADE_DURATION",200);!function(t){t[t.IDLE=0]="IDLE",t[t.FADE_IN=1]="FADE_IN",t[t.FADE_OUT=2]="FADE_OUT"}(p||(p={}));t("DrawManager",v("DrawManager")(f=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,u(d(e),"oldTime",0),u(d(e),"duration",m),u(d(e),"fadeStatus",p.IDLE),u(d(e),"fadeResolve",void 0),u(d(e),"faderNode",void 0),u(d(e),"ctx",void 0),u(d(e),"block",void 0),e}c(e,t);var i=e.prototype;return i.init=function(){this.block=this.addComponent(a),this.ctx=this.addComponent(n);var t=this.getComponent(o);t.setAnchorPoint(.5,.5),t.setContentSize(A,D),this.setAlpha(1)},i.setAlpha=function(t){this.ctx.clear(),this.ctx.rect(0,0,A,D),this.ctx.fillColor=new r(0,0,0,255*t),this.ctx.fill(),this.block.enabled=1===t},i.update=function(){var t=(h.totalTime-this.oldTime)/this.duration;switch(this.fadeStatus){case p.FADE_IN:t<1?this.setAlpha(t):(this.fadeStatus=p.IDLE,this.setAlpha(1),this.fadeResolve(null));break;case p.FADE_OUT:t<1?this.setAlpha(1-t):(this.fadeStatus=p.IDLE,this.setAlpha(0),this.fadeResolve(null))}},i.fadeIn=function(t){var e=this;return void 0===t&&(t=m),this.setAlpha(0),this.duration=t,this.fadeStatus=p.FADE_IN,this.oldTime=h.totalTime,new Promise((function(t){e.fadeResolve=t}))},i.fadeOut=function(t){var e=this;return void 0===t&&(t=m),this.setAlpha(1),this.duration=t,this.fadeStatus=p.FADE_OUT,this.oldTime=h.totalTime,new Promise((function(t){e.fadeResolve=t}))},i.mask=function(){return this.setAlpha(1),new Promise((function(t){setTimeout(t,m)}))},e}(l))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/BurstAnimationFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./FSM.ts","./AnState.ts","./EntityManager.ts"],(function(t){"use strict";var n,i,e,a,o,s,r,c,u,h,f,l,p;return{setters:[function(t){n=t.cclegacy,i=t._decorator,e=t.Animation,a=t.AnimationClip},function(t){o=t.FSM_BURST_STATE_TRIGGER_PARAMS_ENUM,s=t.RES_PATH},function(t){r=t.inheritsLoose,c=t.defineProperty,u=t.assertThisInitialized},function(t){h=t.FSM_PARAM_TYPE_ENUM,f=t.default},function(t){l=t.default},function(t){p=t.EntityManager}],execute:function(){var M;n._RF.push({},"d2f44pq6ORBWrhzXXDC99FS","BurstAnimationFSM",void 0);var S=i.ccclass;i.property,t("default",S("BurstAnimationFSM")(M=function(t){function n(){for(var n,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return n=t.call.apply(t,[this].concat(e))||this,c(u(n),"animationComponent",void 0),n}r(n,t);var i=n.prototype;return i.init=function(){this.animationComponent=this.node.addComponent(e),this.initParams(),this.initStateMachine()},i.initStateMachine=function(){for(var t=0,n=Object.keys(o);t<n.length;t++){var i=n[t];this.stateMachine.set(o[i],new l(this,s.BURST_BASE_ATLAS+"/"+o[i],a.WrapMode.Normal,!1))}},i.initParams=function(){for(var t=0,n=Object.keys(o);t<n.length;t++){var i=n[t];this.params.set(o[i],{type:h.TRIGGER,value:!1})}},i.stateChange=function(){var t=this.node.getComponent(p).state;this.stateMachine.get(t).stateChange()},n}(f))||M);n._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeAnimationFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./FSM.ts","./EntityManager.ts","./SmokeAnimationSubFSM.ts"],(function(t){"use strict";var n,i,e,a,o,s,c,u,r,h,m;return{setters:[function(t){n=t.cclegacy,i=t.Animation},function(t){e=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,a=t.FSM_STATE_NUM_PARAMS_ENUM},function(t){o=t.inheritsLoose,s=t.defineProperty,c=t.assertThisInitialized},function(t){u=t.FSM_PARAM_TYPE_ENUM,r=t.default},function(t){h=t.EntityManager},function(t){m=t.default}],execute:function(){n._RF.push({},"dbc59aG2MdGSrCgYcutVmMq","SmokeAnimationFSM",void 0);t("default",function(t){function n(){for(var n,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return n=t.call.apply(t,[this].concat(e))||this,s(c(n),"animationComponent",void 0),n}o(n,t);var r=n.prototype;return r.init=function(){this.animationComponent=this.node.addComponent(i),this.initParams(),this.initStateMachine(),this.initAnimationEvent()},r.initAnimationEvent=function(){var t=this;this.animationComponent.on(i.EventType.FINISHED,(function(){t.node.active=!1}))},r.initStateMachine=function(){this.stateMachine.set(e.IDLE,new m(this,e.IDLE))},r.initParams=function(){this.params.set(e.IDLE,{type:u.TRIGGER,value:!1}),this.params.set(a.DIRECTION,{type:u.NUMBER,value:0})},r.stateChange=function(){var t=this.node.getComponent(h).state;this.stateMachine.get(t).stateChange()},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/level13.ts",["cc","./Enums.ts"],(function(l){"use strict";var t,e,n,u,E,R;return{setters:[function(l){t=l.cclegacy},function(l){e=l.DIRECTION_ORDER_ENUM,n=l.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,u=l.ENTITY_TYPE_ENUM,E=l.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,R=l.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){t._RF.push({},"debd9ZdfURKeobRVWw9gK9q","level13",void 0);var i={x:10,y:1,direction:e.LEFT,state:n.IDLE,type:u.PLAYER},s=[{x:1,y:4,direction:e.RIGHT,state:E.IDLE,type:u.ENEMY},{x:3,y:2,direction:e.RIGHT,state:E.IDLE,type:u.ENEMY_IRON},{x:5,y:1,direction:e.RIGHT,state:E.IDLE,type:u.ENEMY}],_=[{x:1,y:1,state:n.IDLE,type:u.BURST,direction:e.TOP},{x:5,y:2,state:n.IDLE,type:u.BURST,direction:e.TOP}],T={x:1,y:6,direction:e.TOP,state:R.IDLE,type:u.DOOR};l("default",{mapInfo:[[0,8,8,8,8,8,8,8,8,8,8],[4,7,9,9,9,9,7,9,9,9,9],[4,9,9,9,7,7,9,9,9,7,2],[4,9,0,8,8,8,8,8,8,8,8],[4,9,4,7,7,7,7,7,7,7,6],[4,9,4,null,null,null,null,null,null,null,null],[1,9,3,null,null,null,null,null,null,null,null],[5,7,6,null,null,null,null,null,null,null,null]],player:i,enemies:s,spikes:[],bursts:_,door:T});t._RF.pop()}}}));

System.register("chunks:///_virtual/DoorAnimationSubFSM.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./SubFSM.ts","./Utils.ts","./AnState.ts"],(function(t){"use strict";var e,n,i,s,a,o,u,r;return{setters:[function(t){e=t.cclegacy,n=t.AnimationClip},function(t){i=t.FSM_STATE_NUM_PARAMS_ENUM,s=t.RES_PATH},function(t){a=t.inheritsLoose},function(t){o=t.default},function(t){u=t.getDirKeyValue},function(t){r=t.default}],execute:function(){e._RF.push({},"eaa2fu/R+BLM5zPViMo5JSb","DoorAnimationSubFSM",void 0);t("default",function(t){function e(e,a,o){var c;void 0===o&&(o=!0),(c=t.call(this,e)||this).fsm=e,c.paramsKey=a;var f=c.fsm.getParams(i.DIRECTION),l=u(f);return c.stateMachine.set(a,new r(c.fsm,s.DOOR_BASE_ATLAS+"/"+a+"/",n.WrapMode.Normal,o,l)),c}return a(e,t),e.prototype.stateChange=function(){this.currentState=this.stateMachine.get(this.paramsKey)},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/level17.ts",["cc","./Enums.ts"],(function(t){"use strict";var e,E,T,y,S,s,i;return{setters:[function(t){e=t.cclegacy},function(t){E=t.DIRECTION_ORDER_ENUM,T=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,y=t.ENTITY_TYPE_ENUM,S=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM,s=t.FSM_SPIKES_STATE_TRIGGER_PARAMS_ENUM,i=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM}],execute:function(){e._RF.push({},"f4f8aAzfxtMDag+SZYCvO/X","level17",void 0);var I={x:7,y:7,direction:E.LEFT,state:T.IDLE,type:y.PLAYER},R=[{x:2,y:1,direction:E.BOTTOM,state:S.IDLE,type:y.ENEMY},{x:2,y:4,direction:E.RIGHT,state:S.IDLE,type:y.ENEMY}],a=[{x:1,y:3,type:y.SPIKES,state:s.TWO},{x:3,y:3,type:y.SPIKES,state:s.TWO},{x:4,y:1,type:y.SPIKES,state:s.TWO},{x:4,y:4,type:y.SPIKES,state:s.TWO},{x:4,y:6,type:y.SPIKES,state:s.TWO},{x:5,y:3,type:y.SPIKES,state:s.TWO},{x:6,y:2,type:y.SPIKES,state:s.TWO},{x:6,y:6,type:y.SPIKES,state:s.TWO}],n=[{x:1,y:6,state:T.IDLE,type:y.BURST,direction:E.TOP},{x:2,y:6,state:T.IDLE,type:y.BURST,direction:E.TOP},{x:3,y:6,state:T.IDLE,type:y.BURST,direction:E.TOP},{x:4,y:2,state:T.IDLE,type:y.BURST,direction:E.TOP},{x:4,y:5,state:T.IDLE,type:y.BURST,direction:E.TOP},{x:5,y:4,state:T.IDLE,type:y.BURST,direction:E.TOP},{x:5,y:5,state:T.IDLE,type:y.BURST,direction:E.TOP},{x:6,y:5,state:T.IDLE,type:y.BURST,direction:E.TOP}],_={x:0,y:1,direction:E.LEFT,state:i.IDLE,type:y.DOOR};t("default",{mapInfo:[[8,8,8,8,8,8,8,2],[9,9,9,9,9,9,9,4],[0,9,9,7,7,7,9,4],[4,9,7,9,9,9,9,4],[4,9,9,9,9,7,7,4],[4,9,9,9,7,null,null,4],[4,7,7,7,9,9,9,3],[4,9,9,9,9,9,9,9],[1,8,8,8,8,8,8,8],[5,7,7,7,7,7,7,6]],player:I,enemies:R,spikes:a,bursts:n,door:_});e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./constant.ts","./EntityManager.ts","./EventMgr.ts","./DataMgr.ts","./PlayerAnimationFSM.ts"],(function(t){"use strict";var e,n,s,i,r,o,a,c,h,u,E,T,f,p,l,_,R,A,v,y,I,g,P;return{setters:[function(t){e=t.cclegacy,n=t._decorator,s=t.Vec2},function(t){i=t.TILE_TYPE_ENUM,r=t.EVENT_ENUM,o=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM,a=t.CONTROL_BTN_ENUM,c=t.DIRECTION_ENUM,h=t.FSM_DOOR_STATE_TRIGGER_PARAMS_ENUM,u=t.FSM_BURST_STATE_TRIGGER_PARAMS_ENUM,E=t.FSM_ENEMY_STATE_TRIGGER_PARAMS_ENUM},function(t){T=t.inheritsLoose,f=t.defineProperty,p=t.assertThisInitialized},function(t){l=t.allSettled,_=t.getDirKeyValue,R=t.getBlockState},function(t){A=t.PLAYER_CONST,v=t.DirectionVec2},function(t){y=t.EntityManager},function(t){I=t.default},function(t){g=t.default},function(t){P=t.default}],execute:function(){var d;e._RF.push({},"f55ecAEvU1AzYTT45P5lxhz","PlayerMgr",void 0);var M=n.ccclass,D=[null,i.CLIFF_CENTER,i.CLIFF_LEFT,i.CLIFF_RIGHT];t("PlayerMgr",M("PlayerMgr")(d=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,f(p(e),"speed",A.MOVE_SPEED),f(p(e),"isMoving",!1),f(p(e),"currentInputDir",void 0),f(p(e),"playerArrow",new s),e}T(e,t);var n=e.prototype;return n.init=function(e){var n=this;this.fsm=this.addComponent(P),this.fsm.init(),l(this.fsm.waitList).then((function(){t.prototype.init.call(n,e),n.targetPos.x=n.pos.x,n.targetPos.y=n.pos.y,n.playerArrow=v.get(_(e.direction)),n.setEvents()}))},n.inputXY=function(t){if(I.Instance.emit(r.RECORD),this.currentInputDir=t,!this.isMoving&&this.state!==o.ATTACK&&!this.checkToAttack()){switch(t){case c.TOP:case c.BOTTOM:case c.LEFT:case c.RIGHT:if(this.checkDoor())return;if(!this.moveCheck(t))return void this.setBlockState(t);this.isMoving=!0,I.Instance.emit(r.PLAYER_MOVING,t),this.targetPos.add(v.get(t));break;case a.TURN_LEFT:if(!this.moveCheck(t))return void this.setBlockState(t);this.isMoving=!0,this.currentDir=this.turnDir(-1),this.state=o.TURN_LEFT;break;case a.TURN_RIGHT:if(!this.moveCheck(t))return void this.setBlockState(t);this.isMoving=!0,this.currentDir=this.turnDir(1),this.state=o.TURN_RIGHT}var e=_(this.currentDir);this.playerArrow=v.get(e).clone()}},n.checkDoor=function(){var t=_(this.currentDir),e=v.get(t).clone(),n=g.Instance.door;return!(!n||n.state!==h.DEATH||!(n.pos.x===this.pos.x&&n.pos.y===this.pos.y||n.pos.x===e.x+this.pos.x&&n.pos.y===e.y+this.pos.y))&&(I.Instance.emit(r.NEXT_LEVEL),!0)},n.moveCheck=function(t){var e=t;t===a.TURN_RIGHT&&(e=_(this.turnDir(1))),t===a.TURN_LEFT&&(e=_(this.turnDir(-1)));var n=v.get(e),i=new s;return s.add(i,this.playerArrow,this.pos),this.checkPoint(this.pos,n,!1,t)&&this.checkPoint(i,n,!0,t)},n.checkPoint=function(t,e,n,r){void 0===n&&(n=!1);var o=g.Instance.mapInfo,c=new s;if(s.add(c,t,e),c.x<0||c.x>=g.Instance.mapColCount||c.y<0||c.y>=g.Instance.mapRowCount)return!1;var h=o[c.y][c.x];return!(!(D.indexOf(h)>-1)||!n&&r!==a.TURN_RIGHT&&r!==a.TURN_LEFT)||!(h!==i.FLOOR&&!this.getBurstByPoint(c)&&!this.getSpikesByPoint(c))&&this.checkOtherEntity(c,n)},n.checkOtherEntity=function(t,e){var n=g.Instance,s=n.enemys,i=n.door,r=null;r=i.state!==h.DEATH?[].concat(s,[i]):[].concat(s);for(var o=0;o<r.length;o++)if(r[o]&&!r[o].state.includes("death")&&r[o].pos.x===t.x&&r[o].pos.y===t.y)return!1;return!0},n.getBurstByPoint=function(t){for(var e=g.Instance.bursts,n=0;n<e.length;n++)if(e[n].pos.x===t.x&&e[n].pos.y===t.y&&e[n].state!==u.DEATH)return!0;return!1},n.getSpikesByPoint=function(t){for(var e=g.Instance.spikes,n=0;n<e.length;n++)if(e[n].pos.x===t.x&&e[n].pos.y===t.y)return!0;return!1},n.turnDir=function(t){return(this.currentDir+t+4)%4},n.updateXY=function(){if(s.strictEquals(this.pos,this.targetPos))this.isMoving&&this.moveEnd();else{var t=this.targetPos.clone().subtract(this.pos).normalize();this.pos.add(t.multiplyScalar(this.speed)),s.equals(this.pos,this.targetPos,.1)&&(this.pos.x=this.targetPos.x,this.pos.y=this.targetPos.y)}},n.moveEnd=function(){I.Instance.emit(r.PLAYER_MOVE_END),this.isMoving=!1},n.update=function(e){this.updateXY(),t.prototype.update.call(this,e)},n.setEvents=function(){I.Instance.emit(r.PLAYER_BORN),I.Instance.on(r.PLAYER_CTRL,this.inputXY,this),I.Instance.on(r.PLAYER_DEATH,this.toDeath,this),this.setAnimationEvent()},n.setAnimationEvent=function(){var t=this.fsm.stateMachine.get(o.ATTACK).stateMachine.get(o.ATTACK);t.animationClips.forEach((function(e,n){var s=n.replace(t.basePath,"");e.events.push({frame:4*A.ANIMATION_SPEED,func:"onAttackShake",params:[s]}),e.updateEventDatas()}))},n.onAttackShake=function(t){I.Instance.emit(r.SCREEN_SHAKE,t)},n.onDestroy=function(){this.offEvents()},n.setBlockState=function(t){var e=t;if(t===a.TURN_LEFT)this.state=o.BLOCK_TURN_LEFT,e=_(this.turnDir(-1));else if(t===a.TURN_RIGHT)this.state=o.BLOCK_TURN_RIGHT,e=_(this.turnDir(1));else{var n=v.get(t);this.state=R(n,this.playerArrow)}I.Instance.emit(r.SCREEN_SHAKE,e)},n.toDeath=function(t){void 0===t&&(t=o.DEATH),this.state=t,this.offEvents()},n.checkToAttack=function(){if(this.currentInputDir===a.TURN_LEFT||this.currentInputDir===a.TURN_RIGHT)return!1;var t=v.get(this.currentInputDir);if(!t.equals(this.playerArrow))return!1;for(var e=g.Instance.enemys,n=t.clone().multiplyScalar(2),i=new s(this.pos.x+n.x,this.pos.y+n.y),c=0;c<e.length;c++){var h=e[c];if(h.pos.x===i.x&&h.pos.y===i.y&&h.state!==E.DEATH)return this.state=o.ATTACK,I.Instance.emit(r.PLAYER_ATTACK,h.id),!0}return!1},n.offEvents=function(){I.Instance.off(r.PLAYER_CTRL,this.inputXY,this),I.Instance.off(r.PLAYER_DEATH,this.toDeath,this)},e}(y))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/BurstMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./constant.ts","./EntityManager.ts","./EventMgr.ts","./DataMgr.ts","./BurstAnimationFSM.ts"],(function(t){"use strict";var n,s,i,e,o,a,c,r,u,f,h,E,T;return{setters:[function(t){n=t.cclegacy,s=t._decorator,i=t.UITransform},function(t){e=t.EVENT_ENUM,o=t.FSM_BURST_STATE_TRIGGER_PARAMS_ENUM,a=t.FSM_PLAYER_STATE_TRIGGER_PARAMS_ENUM},function(t){c=t.inheritsLoose},function(t){r=t.allSettled},function(t){u=t.TILE_CONST},function(t){f=t.EntityManager},function(t){h=t.default},function(t){E=t.default},function(t){T=t.default}],execute:function(){var A;n._RF.push({},"f8975+TCHxBIpGESMl4vtKA","BurstMgr",void 0);var p=s.ccclass;t("BurstMgr",p("BurstMgr")(A=function(t){function n(){return t.apply(this,arguments)||this}c(n,t);var s=n.prototype;return s.init=function(n){var s=this;this.fsm=this.addComponent(T),this.fsm.init(),r(this.fsm.waitList).then((function(){t.prototype.init.call(s,n),s.getComponent(i).setContentSize(u.WIDTH,u.HEIGHT),s.setEvents()}))},s.update=function(t){this.node.setPosition(this.pos.x*u.WIDTH,-this.pos.y*u.HEIGHT)},s.setEvents=function(){h.Instance.on(e.PLAYER_MOVE_END,this.checkToAttack,this)},s.checkToAttack=function(){if(this.state!==o.DEATH){var t=E.Instance.player;t.pos.x===this.pos.x&&t.pos.y===this.pos.y?this.state===o.ATTACK?(h.Instance.emit(e.PLAYER_DEATH,a.AIRDEATH),this.toDeath()):this.state=o.ATTACK:this.state===o.ATTACK?this.toDeath():this.state=o.IDLE}},s.toDeath=function(){this.state=o.DEATH,this.offEvents()},s.onDestroy=function(){},s.offEvents=function(){},n}(f))||A);n._RF.pop()}}}));

System.register("chunks:///_virtual/TileMgr.ts",["cc","./Enums.ts","./_rollupPluginModLoBabelHelpers.js","./Utils.ts","./DataMgr.ts","./Tile.ts"],(function(t){"use strict";var e,n,i,r,o,s,a,l,c,u,f;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Component},function(t){r=t.RES_PATH},function(t){o=t.inheritsLoose,s=t.defineProperty,a=t.assertThisInitialized},function(t){l=t.loadAtlas,c=t.randomNum},function(t){u=t.default},function(t){f=t.default}],execute:function(){var p;e._RF.push({},"fb69ffVN8RLqLRCmoy2wvea","TileMgr",void 0);var d=n.ccclass;n.property,t("TileMgr",d("TileMgr")(p=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,s(a(e),"spriteAtlas",null),e}o(e,t);var n=e.prototype;return n.init=function(){var t=this;l(r.TILE_ATLAS+"tile").then((function(e){e&&(t.spriteAtlas=e,t.setMaps())}))},n.setMaps=function(){for(var t=u.Instance.mapInfo,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++){var i=t[e][n];null!==i&&this.addOneTile(e,n,i)}console.log("mapInfo",t)},n.addOneTile=function(t,e,n){var i=f.TileSrc.get(n),r=c(0,i.length),o=new f("tile_"+e+"_"+t,n,this.spriteAtlas.getSpriteFrame(i[r]));o.node.setPosition(e*f.WIDTH,-f.HEIGHT*t),this.node.addChild(o.node)},e}(i))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Enums.ts","./level11.ts","./FSM.ts","./SubFSM.ts","./Utils.ts","./constant.ts","./AnState.ts","./DoorAnimationSubFSM.ts","./EntityManager.ts","./DoorAnimationFSM.ts","./Singleton.ts","./EventMgr.ts","./DataMgr.ts","./DoorMgr.ts","./SmokeAnimationSubFSM.ts","./SmokeAnimationFSM.ts","./SmokeMgr.ts","./level8.ts","./DrawManager.ts","./FaderManager.ts","./level15.ts","./level6.ts","./level10.ts","./level4.ts","./SpikesAnimationSubFSM.ts","./SpikesAnimationFSM.ts","./StartMgr.ts","./level19.ts","./level16.ts","./level20.ts","./ShakeMgr.ts","./PlayerAnimationSubFSM.ts","./PlayerAnimationFSM.ts","./type.ts","./EnemyAnimationSubFSM.ts","./EnemyAnimationFSM.ts","./level3.ts","./level1.ts","./level2.ts","./level5.ts","./level7.ts","./level9.ts","./level12.ts","./level13.ts","./level14.ts","./level17.ts","./level18.ts","./level21.ts","./index.ts","./Tile.ts","./TileMgr.ts","./PlayerMgr.ts","./EnemyMgr.ts","./BurstAnimationFSM.ts","./BurstMgr.ts","./SpikesMgr.ts","./BattleMgr.ts","./MenuMgr.ts","./ControlMgr.ts","./LoadingMgr.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});